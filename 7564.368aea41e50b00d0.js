"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7564],{7762:(R,m,n)=>{n.d(m,{L:()=>p});const p=(0,n(5083).F3)("Geolocation",{web:()=>n.e(2920).then(n.bind(n,2920)).then(u=>new u.GeolocationWeb)})},7564:(R,m,n)=>{n.r(m),n.d(m,{AddressPage:()=>A});var d=n(467),p=n(177),u=n(4341),a=n(4742),P=n(7762),e=n(4438),h=n(3656),O=n(9568),c=n(1208),b=n(2068);const _=["map"];function C(i,g){if(1&i){const s=e.RV6();e.j41(0,"ion-button",12),e.bIt("click",function(){e.eBV(s);const o=e.XpG();return e.Njj(o.close())}),e.EFF(1),e.k0s()}if(2&i){const s=e.XpG();e.R7$(),e.JRh(s.text.cancel)}}function M(i,g){if(1&i){const s=e.RV6();e.j41(0,"ion-item",17),e.bIt("click",function(){const o=e.eBV(s).$implicit,r=e.XpG(2);return e.Njj(r.close(o))}),e.j41(1,"ion-label"),e.EFF(2),e.j41(3,"small",18),e.EFF(4),e.k0s()()()}if(2&i){const s=g.$implicit;e.R7$(2),e.JRh(s.type),e.R7$(2),e.JRh(s.address)}}function v(i,g){if(1&i&&(e.j41(0,"ion-accordion-group")(1,"ion-accordion",13)(2,"ion-item",14)(3,"ion-label"),e.EFF(4),e.k0s()(),e.j41(5,"div",15),e.DNE(6,M,5,2,"ion-item",16),e.k0s()()()),2&i){const s=e.XpG();e.R7$(4),e.JRh(s.text.saved_address),e.R7$(2),e.Y8G("ngForOf",s.data)}}function f(i,g){if(1&i){const s=e.RV6();e.j41(0,"ion-button",19),e.bIt("click",function(){e.eBV(s);const o=e.XpG();return e.Njj(o.saveAddress())}),e.EFF(1),e.k0s()}if(2&i){const s=e.XpG();e.R7$(),e.JRh(s.text.save_address)}}function E(i,g){1&i&&(e.j41(0,"ion-button",20),e.nrm(1,"ion-spinner",21),e.k0s())}let A=(()=>{var i;class g{constructor(t,o,r,l,y,D,I){this.navParams=t,this.platform=o,this.zone=r,this.otherService=l,this.mapService=y,this.server=D,this.alertCtrl=I,this.type="Home",this.autocompleteItems=[],this.show=!0,this.hasClick=!1,this.data=t.get("data"),this.store_id=t.get("store_id");const k=localStorage.getItem("app_lang");null!==k&&(this.text=JSON.parse(k),this.text=this.text.text)}ngOnInit(){this.getCurrentLocation()}requestLocationPermission(){var t=this;return(0,d.A)(function*(){try{"granted"===(yield P.L.requestPermissions()).location?t.getCurrentLocation():t.showAlert("Permission Denied","Please allow location access in your app or browser settings.")}catch(o){t.showAlert("Error","Unable to request location permission."),console.error("Permission request error",o)}})()}getCurrentLocation(){var t=this;return(0,d.A)(function*(){try{const o=yield P.L.getCurrentPosition();t.latitude=o.coords.latitude,t.longitude=o.coords.longitude,console.log("Latitude:",t.latitude,"Longitude:",t.longitude)}catch(o){1===o.code?t.showAlert("Location Permission Denied","Please allow location access in your app or browser settings."):t.showAlert("Error","Failed to get your location."),console.error("Error getting location",o)}})()}showAlert(t,o){var r=this;return(0,d.A)(function*(){r.otherService.confirmPernissions(t,o).then(l=>{r.close()})})()}setType(t){this.type=t}ionViewDidEnter(){var t=this;return(0,d.A)(function*(){t.platform.ready().then(()=>{t.loadMap()})})()}close(t=[]){var o=this;return(0,d.A)(function*(){o.otherService.closeModel(t)})()}loadMap(){var t=this;return(0,d.A)(function*(){t.map=null,t.show=!0;let o=yield t.mapService.getMap();t.map=yield new google.maps.Map(t.mapElement.nativeElement,o),t.show=!1,t.map.addListener("tilesloaded",(0,d.A)(function*(){t.lat=t.map.center.lat(),t.lng=t.map.center.lng()}))})()}UpdateSearchResults(){this.GoogleAutocomplete.getPlacePredictions({input:this.autocomplete},(t,o)=>{this.autocompleteItems=[],this.zone.run(()=>{t.forEach(r=>{this.autocompleteItems.push(r)})})})}SelectSearchResult(t){const o=new google.maps.Geocoder;new google.maps.InfoWindow,this.placeid=t.place_id,o.geocode({placeId:this.placeid},(l,y)=>{"OK"===y?l[0]?(this.map.setZoom(16),this.map.setCenter(l[0].geometry.location)):window.alert("No results found"):window.alert("Geocoder failed due to: "+y)}),this.ClearAutocomplete()}ClearAutocomplete(){this.autocompleteItems=[],this.autocomplete=""}saveAddress(){var t=this;return(0,d.A)(function*(){if(t.lat=t.latitude,t.lng=t.longitude,!t.address||t.address.length<4||!t.lat||!t.lng)return t.otherService.toast(t.text.correct_detail);let o={type:t.type,address:t.address,floor:t.floor,landmark:t.landmark,lat:t.latitude,lng:t.longitude,user_id:localStorage.getItem("user_id"),store_id:t.store_id};t.hasClick=!0,t.server.saveAddress(o).subscribe(r=>{t.hasClick=!1,t.otherService.triggerAddressLoadData.emit(),t.close(r.latest)})})()}}return(i=g).\u0275fac=function(t){return new(t||i)(e.rXU(h.y8),e.rXU(h.OD),e.rXU(e.SKi),e.rXU(O.G),e.rXU(c.u),e.rXU(b.Z),e.rXU(a.hG))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-address"]],viewQuery:function(t,o){if(1&t&&e.GBs(_,5),2&t){let r;e.mGM(r=e.lsd())&&(o.mapElement=r.first)}},decls:31,vars:23,consts:[[1,"ion-no-border"],["slot","end"],["color","medium",3,"click",4,"ngIf"],[1,"ion-padding"],[4,"ngIf"],[2,"font-weight","bold"],["size","4",3,"click"],["name","address","label-placement","floating","fill","outline","mode","md",3,"ngModelChange","label","ngModel","disabled"],["name","floor","label-placement","floating","fill","outline","mode","md",3,"ngModelChange","label","ngModel","disabled"],["name","landmark","label-placement","floating","fill","outline","mode","md",3,"ngModelChange","label","ngModel","disabled"],["mode","ios","expand","block","color","dark","type","submit",3,"click",4,"ngIf"],["mode","ios","expand","block","color","dark","type","button",4,"ngIf"],["color","medium",3,"click"],["value","first"],["slot","header","color","light",1,"h"],["slot","content",1,"ion-padding"],["style","cursor: pointer;",3,"click",4,"ngFor","ngForOf"],[2,"cursor","pointer",3,"click"],[2,"color","gray","margin-top","5px","display","block"],["mode","ios","expand","block","color","dark","type","submit",3,"click"],["mode","ios","expand","block","color","dark","type","button"],["name","crescent"]],template:function(t,o){1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.DNE(3,C,2,1,"ion-button",2),e.k0s()()(),e.j41(4,"ion-content")(5,"div",3),e.DNE(6,v,7,2,"ion-accordion-group",4),e.j41(7,"p",5),e.EFF(8),e.k0s(),e.nrm(9,"br"),e.j41(10,"ion-row")(11,"ion-col",6),e.bIt("click",function(){return o.setType("Home")}),e.j41(12,"span"),e.EFF(13),e.k0s()(),e.j41(14,"ion-col",6),e.bIt("click",function(){return o.setType("Office")}),e.j41(15,"span"),e.EFF(16),e.k0s()(),e.j41(17,"ion-col",6),e.bIt("click",function(){return o.setType("Other")}),e.j41(18,"span"),e.EFF(19),e.k0s()()(),e.nrm(20,"br")(21,"br"),e.j41(22,"ion-input",7),e.mxI("ngModelChange",function(l){return e.DH7(o.address,l)||(o.address=l),l}),e.k0s(),e.nrm(23,"br"),e.j41(24,"ion-input",8),e.mxI("ngModelChange",function(l){return e.DH7(o.floor,l)||(o.floor=l),l}),e.k0s(),e.nrm(25,"br"),e.j41(26,"ion-input",9),e.mxI("ngModelChange",function(l){return e.DH7(o.landmark,l)||(o.landmark=l),l}),e.k0s(),e.nrm(27,"br")(28,"br"),e.DNE(29,f,2,1,"ion-button",10)(30,E,2,0,"ion-button",11),e.k0s()()),2&t&&(e.R7$(3),e.Y8G("ngIf",o.text),e.R7$(3),e.Y8G("ngIf",o.data&&o.data.length>0),e.R7$(2),e.JRh(o.text.add_new_address),e.R7$(4),e.HbH("Home"==o.type?"typeSelected":"type"),e.R7$(),e.JRh(o.text.home),e.R7$(2),e.HbH("Office"==o.type?"typeSelected":"type"),e.R7$(),e.JRh(o.text.office),e.R7$(2),e.HbH("Other"==o.type?"typeSelected":"type"),e.R7$(),e.JRh(o.text.other),e.R7$(3),e.FS9("label",o.text.com_address),e.R50("ngModel",o.address),e.Y8G("disabled",o.hasClick),e.R7$(2),e.FS9("label",o.text.floor),e.R50("ngModel",o.floor),e.Y8G("disabled",o.hasClick),e.R7$(2),e.FS9("label",o.text.landmark),e.R50("ngModel",o.landmark),e.Y8G("disabled",o.hasClick),e.R7$(3),e.Y8G("ngIf",!o.hasClick),e.R7$(),e.Y8G("ngIf",o.hasClick))},dependencies:[a.bv,a.xk,a.YH,a.Jm,a.QW,a.hU,a.W9,a.eU,a.$w,a.uz,a.he,a.ln,a.w2,a.ai,a.Gw,p.MD,p.Sq,p.bT,u.YN,u.BC,u.vS],styles:["ion-row[_ngcontent-%COMP%]{text-align:center}ion-toolbar[_ngcontent-%COMP%]{--background: white}.type[_ngcontent-%COMP%]{background-color:var(--ion-color-light);padding:10px 15px;border-radius:5px}.typeSelected[_ngcontent-%COMP%]{background-color:var(--ion-color-dark);color:#fff;padding:10px 15px;border-radius:5px}#map[_ngcontent-%COMP%]{width:100%;height:45vh}.map-wrapper[_ngcontent-%COMP%]{position:relative}.map-wrapper[_ngcontent-%COMP%]   #map_center[_ngcontent-%COMP%]{position:absolute;z-index:99;height:40px;width:40px;top:50%;left:50%;margin-left:-21px;margin-top:-41px}.h[_ngcontent-%COMP%]{--min-height:10px !important}ion-accordion[_ngcontent-%COMP%]{border-radius:10px;margin-bottom:40px}"]}),g})()},1208:(R,m,n)=>{n.d(m,{u:()=>P});var d=n(467),p=n(7762),u=n(4438),a=n(3158);let P=(()=>{var e;class h{constructor(c){this.nativeGeocoder=c}getLocation(){const c=p.L.getCurrentPosition();return console.log("data ",c),c}getMap(){return(0,d.A)(function*(){const c=yield p.L.getCurrentPosition();return{center:yield new google.maps.LatLng(c.coords.latitude,c.coords.longitude),zoom:16,mapTypeId:google.maps.MapTypeId.ROADMAP}})()}getAddress(c,b){var _=this;return(0,d.A)(function*(){return yield _.nativeGeocoder.reverseGeocode(c,b,{useLocale:!0,maxResults:5}).then(function(){var M=(0,d.A)(function*(v){_.address="";let f=[];for(let[E,A]of Object.entries(v[0]))A.length>0&&f.push(A);f.reverse();for(let E of f)_.address+=E+", ";_.address=_.address.slice(0,-2)});return function(v){return M.apply(this,arguments)}}()).catch(M=>{}),console.log("Address  "+_.address),_.address})()}}return(e=h).\u0275fac=function(c){return new(c||e)(u.KVO(a.K))},e.\u0275prov=u.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),h})()}}]);