"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1692],{1692:(C,f,i)=>{i.r(f),i.d(f,{MapPage:()=>x});var d=i(467),u=i(177),m=i(4341),r=i(4742),G=i(8870),e=i(4438),l=i(3656),M=i(9568),D=i(1263);const s=["map"];function v(n,_){if(1&n&&(e.j41(0,"ion-title"),e.EFF(1),e.k0s()),2&n){const o=e.XpG();e.R7$(),e.JRh(o.text.choose_location)}}function p(n,_){if(1&n){const o=e.RV6();e.j41(0,"ion-item",12),e.bIt("click",function(){const a=e.eBV(o).$implicit,c=e.XpG(2);return e.Njj(c.SelectSearchResult(a))}),e.EFF(1),e.k0s()}if(2&n){const o=_.$implicit,t=e.XpG(2);e.Y8G("hidden",0==t.autocompleteItems.length),e.R7$(),e.SpI(" ",o.description," ")}}function R(n,_){if(1&n&&(e.j41(0,"ion-item",13)(1,"label"),e.EFF(2),e.k0s(),e.nrm(3,"ion-icon",14),e.k0s()),2&n){const o=e.XpG(2);e.R7$(2),e.JRh(o.address)}}function P(n,_){1&n&&(e.j41(0,"div",15),e.nrm(1,"ion-icon",16),e.k0s())}function I(n,_){1&n&&(e.j41(0,"div",15)(1,"p",17),e.nrm(2,"ion-spinner",18),e.k0s()())}function g(n,_){if(1&n){const o=e.RV6();e.j41(0,"ion-fab",19),e.bIt("click",function(){e.eBV(o);const a=e.XpG(2);return e.Njj(a.loadMap())}),e.j41(1,"ion-fab-button",20),e.nrm(2,"ion-icon",21),e.k0s()()}}function E(n,_){if(1&n){const o=e.RV6();e.j41(0,"ion-content")(1,"ion-searchbar",5),e.mxI("ngModelChange",function(a){e.eBV(o);const c=e.XpG();return e.DH7(c.autocomplete,a)||(c.autocomplete=a),e.Njj(a)}),e.bIt("ionInput",function(){e.eBV(o);const a=e.XpG();return e.Njj(a.UpdateSearchResults())})("ionClear",function(){e.eBV(o);const a=e.XpG();return e.Njj(a.ClearAutocomplete())}),e.k0s(),e.DNE(2,p,2,2,"ion-item",6)(3,R,4,1,"ion-item",7),e.j41(4,"div",8),e.DNE(5,P,2,0,"div",9)(6,I,3,0,"div",9),e.nrm(7,"div",10,0),e.k0s(),e.DNE(9,g,3,0,"ion-fab",11),e.k0s()}if(2&n){const o=e.XpG();e.R7$(),e.FS9("placeholder",o.text.search_location),e.R50("ngModel",o.autocomplete),e.R7$(),e.Y8G("ngForOf",o.autocompleteItems),e.R7$(),e.Y8G("ngIf",o.address),e.R7$(2),e.Y8G("ngIf",!o.show),e.R7$(),e.Y8G("ngIf",o.show),e.R7$(3),e.Y8G("ngIf",!o.show)}}let x=(()=>{var n;class _{constructor(t,a,c,O){this.platform=t,this.zone=a,this.otherService=c,this.mapService=O,this.autocompleteItems=[],this.show=!0,this.GoogleAutocomplete=new google.maps.places.AutocompleteService,this.otherService.statusBar("#ffc927",2);const h=localStorage.getItem("app_lang");null!==h&&(this.text=JSON.parse(h),this.text=this.text.text)}ngOnInit(){}ionViewDidEnter(){this.platform.ready().then(()=>{this.loadMap()})}loadMap(){var t=this;return(0,d.A)(function*(){t.map=null,t.show=!0;let a=yield t.mapService.getMap();t.map=yield new google.maps.Map(t.mapElement.nativeElement,a),t.show=!1,t.map.addListener("tilesloaded",(0,d.A)(function*(){let c=yield t.mapService.getAddress(t.map.center.lat(),t.map.center.lng());t.address=c,localStorage.setItem("current_lat",t.map.center.lat()),localStorage.setItem("current_lng",t.map.center.lng()),localStorage.setItem("current_address",t.address)}))})()}UpdateSearchResults(){this.GoogleAutocomplete.getPlacePredictions({input:this.autocomplete},(t,a)=>{this.autocompleteItems=[],this.zone.run(()=>{t.forEach(c=>{this.autocompleteItems.push(c)})})})}SelectSearchResult(t){const a=new google.maps.Geocoder;new google.maps.InfoWindow,this.placeid=t.place_id,a.geocode({placeId:this.placeid},(O,h)=>{"OK"===h?O[0]?(this.map.setZoom(16),this.map.setCenter(O[0].geometry.location)):window.alert("No results found"):window.alert("Geocoder failed due to: "+h)}),this.ClearAutocomplete()}ClearAutocomplete(){this.autocompleteItems=[],this.autocomplete=""}}return(n=_).\u0275fac=function(t){return new(t||n)(e.rXU(l.OD),e.rXU(e.SKi),e.rXU(M.G),e.rXU(D.u))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-map"]],viewQuery:function(t,a){if(1&t&&e.GBs(s,5),2&t){let c;e.mGM(c=e.lsd())&&(a.mapElement=c.first)}},decls:6,vars:2,consts:[["map",""],[1,"ion-no-border"],["color","primary"],["slot","start"],[4,"ngIf"],["mode","ios","color","secondary",3,"ngModelChange","ionInput","ionClear","ngModel","placeholder"],["tappable","",3,"hidden","click",4,"ngFor","ngForOf"],["lines","none","routerLink","/tabs/home","routerDirection","root",4,"ngIf"],[1,"map-wrapper"],["id","map_center",4,"ngIf"],["id","map"],["slot","fixed","horizontal","center","vertical","bottom",3,"click",4,"ngIf"],["tappable","",3,"click","hidden"],["lines","none","routerLink","/tabs/home","routerDirection","root"],["name","checkmark-circle","slot","end","color","dark",2,"font-size","40px"],["id","map_center"],["name","location","color","dark",2,"font-size","40px"],["align","center"],["name","crescent",2,"font-size","40px"],["slot","fixed","horizontal","center","vertical","bottom",3,"click"],["color","dark"],["name","locate"]],template:function(t,a){1&t&&(e.j41(0,"ion-header",1)(1,"ion-toolbar",2)(2,"ion-buttons",3),e.nrm(3,"ion-back-button"),e.k0s(),e.DNE(4,v,2,1,"ion-title",4),e.k0s()(),e.DNE(5,E,10,7,"ion-content",4)),2&t&&(e.R7$(4),e.Y8G("ngIf",a.text),e.R7$(),e.Y8G("ngIf",a.text))},dependencies:[r.bv,r.QW,r.W9,r.Q8,r.YW,r.eU,r.iq,r.uz,r.S1,r.w2,r.BC,r.ai,r.Gw,r.el,r.N7,u.MD,u.Sq,u.bT,m.YN,m.BC,m.vS,G.Wk],styles:["#map_canvas[_ngcontent-%COMP%]{width:100%;height:99%;border:1px solid red}#map[_ngcontent-%COMP%]{width:100%;height:85vh}.map-wrapper[_ngcontent-%COMP%]{position:relative}.map-wrapper[_ngcontent-%COMP%]   #map_center[_ngcontent-%COMP%]{position:absolute;z-index:99;height:40px;width:40px;top:50%;left:50%;margin-left:-21px;margin-top:-41px}ion-content[_ngcontent-%COMP%]{--background: var(--ion-color-primary)}"]}),_})()},1263:(C,f,i)=>{i.d(f,{u:()=>e});var d=i(467);const m=(0,i(5083).F3)("Geolocation",{web:()=>i.e(2920).then(i.bind(i,2920)).then(l=>new l.GeolocationWeb)});var r=i(4438),G=i(3158);let e=(()=>{var l;class M{constructor(s){this.nativeGeocoder=s}getLocation(){const s=m.getCurrentPosition();return console.log("data ",s),s}getMap(){return(0,d.A)(function*(){const s=yield m.getCurrentPosition();return{center:yield new google.maps.LatLng(s.coords.latitude,s.coords.longitude),zoom:16,mapTypeId:google.maps.MapTypeId.ROADMAP}})()}getAddress(s,v){var p=this;return(0,d.A)(function*(){return yield p.nativeGeocoder.reverseGeocode(s,v,{useLocale:!0,maxResults:5}).then(function(){var P=(0,d.A)(function*(I){p.address="";let g=[];for(let[E,x]of Object.entries(I[0]))x.length>0&&g.push(x);g.reverse();for(let E of g)p.address+=E+", ";p.address=p.address.slice(0,-2)});return function(I){return P.apply(this,arguments)}}()).catch(P=>{}),console.log("Address  "+p.address),p.address})()}}return(l=M).\u0275fac=function(s){return new(s||l)(r.KVO(G.K))},l.\u0275prov=r.jDH({token:l,factory:l.\u0275fac,providedIn:"root"}),M})()}}]);