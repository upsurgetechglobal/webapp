"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4264,5704,5864,8304],{3923:(N,O,s)=>{s.d(O,{$o:()=>f,_G:()=>C,Vq:()=>M,SQ:()=>c});var f=function(n){return n.Loaded="applePayLoaded",n.FailedToLoad="applePayFailedToLoad",n.Completed="applePayCompleted",n.Canceled="applePayCanceled",n.Failed="applePayFailed",n.DidSelectShippingContact="applePayDidSelectShippingContact",n.DidCreatePaymentMethod="applePayDidCreatePaymentMethod",n}(f||{}),C=function(n){return n.Loaded="googlePayLoaded",n.FailedToLoad="googlePayFailedToLoad",n.Completed="googlePayCompleted",n.Canceled="googlePayCanceled",n.Failed="googlePayFailed",n}(C||{}),M=function(n){return n.Loaded="paymentFlowLoaded",n.FailedToLoad="paymentFlowFailedToLoad",n.Opened="paymentFlowOpened",n.Created="paymentFlowCreated",n.Completed="paymentFlowCompleted",n.Canceled="paymentFlowCanceled",n.Failed="paymentFlowFailed",n}(M||{}),c=function(n){return n.Loaded="paymentSheetLoaded",n.FailedToLoad="paymentSheetFailedToLoad",n.Completed="paymentSheetCompleted",n.Canceled="paymentSheetCanceled",n.Failed="paymentSheetFailed",n}(c||{})},5864:(N,O,s)=>{s.r(O),s.d(O,{OfferPage:()=>P});var f=s(467),C=s(177),M=s(4341),c=s(4742),n=s(4438),a=s(9568),F=s(3656);function D(_,k){if(1&_){const d=n.RV6();n.j41(0,"ion-button",4),n.bIt("click",function(){n.eBV(d);const m=n.XpG();return n.Njj(m.close())}),n.EFF(1),n.k0s()}if(2&_){const d=n.XpG();n.R7$(),n.JRh(d.text.cancel)}}function E(_,k){if(1&_&&(n.j41(0,"p",8),n.EFF(1),n.k0s()),2&_){const d=n.XpG(2);n.R7$(),n.JRh(d.text.no_offer)}}function T(_,k){if(1&_&&(n.j41(0,"ion-item",13)(1,"ion-avatar",14),n.nrm(2,"img",15),n.k0s(),n.j41(3,"ion-label",16)(4,"b"),n.EFF(5),n.k0s(),n.j41(6,"span",17),n.EFF(7),n.k0s()()()),2&_){const d=n.XpG().$implicit;n.R7$(5),n.JRh(d.code),n.R7$(2),n.JRh(d.desc)}}function t(_,k){if(1&_){const d=n.RV6();n.j41(0,"div",11),n.bIt("click",function(){const m=n.eBV(d).$implicit,r=n.XpG(3);return n.Njj(r.setOffer(m))}),n.DNE(1,T,8,2,"ion-item",12),n.k0s()}if(2&_){const d=k.$implicit,b=n.XpG(3);n.R7$(),n.Y8G("ngIf","SUBSCRIPTION"==b.type&&"SUBSCRIPTION"==d.subscription)}}function j(_,k){if(1&_&&(n.j41(0,"ion-item",13)(1,"ion-avatar",14),n.nrm(2,"img",15),n.k0s(),n.j41(3,"ion-label",16)(4,"b"),n.EFF(5),n.k0s(),n.j41(6,"span",17),n.EFF(7),n.k0s()()()),2&_){const d=n.XpG().$implicit;n.R7$(5),n.JRh(d.code),n.R7$(2),n.JRh(d.desc)}}function y(_,k){if(1&_){const d=n.RV6();n.j41(0,"div",11),n.bIt("click",function(){const m=n.eBV(d).$implicit,r=n.XpG(3);return n.Njj(r.setOffer(m))}),n.DNE(1,j,8,2,"ion-item",12),n.k0s()}if(2&_){const d=k.$implicit,b=n.XpG(3);n.R7$(),n.Y8G("ngIf","NORMAL"==b.type&&"NORMAL"==d.subscription)}}function S(_,k){if(1&_&&(n.j41(0,"div")(1,"ion-note",9),n.EFF(2),n.k0s(),n.nrm(3,"br")(4,"br"),n.DNE(5,t,2,1,"div",10)(6,y,2,1,"div",10),n.k0s()),2&_){const d=n.XpG(2);n.R7$(2),n.JRh(d.text.avilable_offer),n.R7$(3),n.Y8G("ngForOf",d.data),n.R7$(),n.Y8G("ngForOf",d.data)}}function h(_,k){if(1&_&&(n.j41(0,"ion-content",5),n.DNE(1,E,2,1,"p",6)(2,S,7,3,"div",7),n.k0s()),2&_){const d=n.XpG();n.R7$(),n.Y8G("ngIf",d.data&&0==d.data.length),n.R7$(),n.Y8G("ngIf",d.data&&d.data.length>0)}}let P=(()=>{var _;class k{constructor(b,m){this.otherService=b,this.navParams=m,this.data=m.get("data"),this.type=m.get("type"),console.log("this.type",this.type);const r=localStorage.getItem("app_lang");null!==r&&(this.text=JSON.parse(r),this.text=this.text.text)}ngOnInit(){}close(b=null){var m=this;return(0,f.A)(function*(){m.otherService.closeModel(b)})()}setOffer(b){var m=this;return(0,f.A)(function*(){m.otherService.closeModel(b)})()}}return(_=k).\u0275fac=function(b){return new(b||_)(n.rXU(a.G),n.rXU(F.y8))},_.\u0275cmp=n.VBU({type:_,selectors:[["app-offer"]],decls:5,vars:2,consts:[[1,"ion-no-border"],["slot","end"],["color","medium",3,"click",4,"ngIf"],["class","ion-padding",4,"ngIf"],["color","medium",3,"click"],[1,"ion-padding"],["align","center",4,"ngIf"],[4,"ngIf"],["align","center"],[2,"color","black"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["lines","none","detail","","style","cursor: pointer;",4,"ngIf"],["lines","none","detail","",2,"cursor","pointer"],["slot","start"],["src","assets/discount-icon.png"],[1,"ion-text-wrap"],[2,"display","block","margin-top","5px"]],template:function(b,m){1&b&&(n.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),n.DNE(3,D,2,1,"ion-button",2),n.k0s()()(),n.DNE(4,h,3,2,"ion-content",3)),2&b&&(n.R7$(3),n.Y8G("ngIf",m.text),n.R7$(),n.Y8G("ngIf",m.data&&m.text))},dependencies:[c.bv,c.mC,c.Jm,c.QW,c.W9,c.eU,c.uz,c.he,c.JI,c.ai,C.MD,C.Sq,C.bT,M.YN],styles:["ion-item[_ngcontent-%COMP%]{margin-top:20px;--min-height: 50px !important;border-radius:5px}ion-content[_ngcontent-%COMP%]{--background: var(--ion-color-light)}.ion-text-wrap[_ngcontent-%COMP%]{color:#000}ion-toolbar[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]{--background: white !important;color:#000!important}"]}),k})()},5704:(N,O,s)=>{s.r(O),s.d(O,{PaymentPage:()=>k});var f=s(467),C=s(177),M=s(4341),c=s(4742),n=s(5083),a=s(3923);const F=(0,n.F3)("Stripe",{web:()=>s.e(1651).then(s.bind(s,1651)).then(d=>new d.StripeWeb)});var D=s(1594),E=s(9350),t=s(4438),j=s(3656),y=s(9568),S=s(1626),h=s(2068);function P(d,b){if(1&d){const m=t.RV6();t.j41(0,"ion-button",4),t.bIt("click",function(){t.eBV(m);const p=t.XpG();return t.Njj(p.close())}),t.EFF(1),t.k0s()}if(2&d){const m=t.XpG();t.R7$(),t.JRh(m.text.cancel)}}function _(d,b){if(1&d){const m=t.RV6();t.j41(0,"ion-content",5)(1,"h3",6),t.EFF(2,"You have insufficient balance in your wallet. Please add "),t.j41(3,"strong"),t.EFF(4),t.k0s(),t.EFF(5," to continue."),t.k0s(),t.nrm(6,"br")(7,"br"),t.j41(8,"ion-row")(9,"ion-col",7),t.nrm(10,"img",8),t.k0s(),t.nrm(11,"br"),t.j41(12,"ion-col",9)(13,"ion-button",10),t.bIt("click",function(){t.eBV(m);const p=t.XpG();return t.Njj(p.addAmountToWallet())}),t.EFF(14),t.nI1(15,"currency"),t.k0s()()()()}if(2&d){const m=t.XpG();t.R7$(4),t.Lme("",m.setting.currency,"",m.data.amount,""),t.R7$(10),t.SpI("Add ",t.i5U(15,3,m.data.amount,"INR")," to Wallet")}}let k=(()=>{var d;class b{constructor(r,p,v,R){this.navParams=r,this.otherService=p,this.http=v,this.server=R,this.options={key:"",amount:0,name:"",description:"The Daily Fruit",image:"",order_id:"",handler:function(w){var A=new CustomEvent("payment.success",{detail:w,bubbles:!0,cancelable:!0});window.dispatchEvent(A)},prefill:{name:"",email:"",contact:""},notes:{address:""},theme:{color:"#3399cc"}},this.message="Not yet stared",this.paymentId="",this.error="",this.data=r.get("data"),this.user_id=localStorage.getItem("user_id");const I=localStorage.getItem("admin_setting"),G=localStorage.getItem("user_data");null!==I&&(this.setting=JSON.parse(I)),null!==G&&(this.user=JSON.parse(G));const z=localStorage.getItem("app_lang");null!==z&&(this.text=JSON.parse(z),this.text=this.text.text),F.initialize({publishableKey:this.data.stripe_key}),this.meta={counsumer_id:778383,consumer_mac:"sdjksfhsd887f8s"},this.customizations={title:"Wallet Recharge",description:"Wallet Recharge",logo:"https://dicont.s3.amazonaws.com/static/flow-logos/flutterwave-logo.png"},this.customerDetails={name:this.user.name,email:this.user.email,phone_number:this.user.phone}}ngOnInit(){}addAmountToWallet(){var r=this;return(0,f.A)(function*(){if(r.data.amount){const p={user_id:r.user_id,amount:r.data.amount,notes:"Add To Wallet\xa0Razorpay"};(yield r.server.createRazorpayOrder(p)).subscribe(v=>{r.options.key=v.razor_key.replace(/\r\n/g,""),r.options.order_id=v.order_id,r.options.amount=Number(v.amount),r.options.name="The Daily Fruit",r.options.prefill.name="The Daily Fruit",r.options.prefill.email="support@thedailyfruit.in",r.options.prefill.contact="9998887776",r.payNow()})}else r.otherService.toast(r.text.enter_amount)})()}payNow(){if(typeof Razorpay>"u")console.error("Razorpay is not loaded yet.");else{var r=new Razorpay(this.options);r.open(),r.on("payment.failed",function(p){console.error("Payment failed",p.error)})}}onPaymentSuccess(r){var p=this;return(0,f.A)(function*(){let v=r.detail,R={razorpay_order_id:null==v?void 0:v.razorpay_order_id,razorpay_payment_id:null==v?void 0:v.razorpay_payment_id,razorpay_signature:null==v?void 0:v.razorpay_signature};(yield p.server.verifyRazorpayOrder(R)).subscribe(I=>{p.otherService.triggerLoadData.emit(),p.otherService.closeModel(I)}),p.message="Success Payment"})()}updateWallet(r=null){var p=this;return(0,f.A)(function*(){const v={amount:p.data.amount,user_id:localStorage.getItem("user_id"),trans_id:r,payment_method:p.payment_method,notes:"Wallet Recharge"};p.server.updateWallet(v).subscribe(R=>{p.payment_method=null,p.otherService.toast(p.text.payment_added),p.close(r)})})()}close(r=null){var p=this;return(0,f.A)(function*(){p.otherService.closeModel(r)})()}httpPost(){const r={user:localStorage.getItem("user_id"),total:this.data.amount};return this.http.post(this.server.getApiUrl()+"stripePayment",r).pipe((0,D.$)())}paymentSheet(){var r=this;return(0,f.A)(function*(){r.payment_method=1;try{F.addListener(a.SQ.Completed,()=>{});const p=r.httpPost(),{paymentIntent:v,ephemeralKey:R,customer:I}=yield function T(d,b){const m="object"==typeof b;return new Promise((r,p)=>{let R,v=!1;d.subscribe({next:I=>{R=I,v=!0},error:p,complete:()=>{v?r(R):m?r(b.defaultValue):p(new E.G)}})})}(p);yield F.createPaymentSheet({paymentIntentClientSecret:v,customerId:I,customerEphemeralKeySecret:R,merchantDisplayName:r.setting.app_name});const G=yield F.presentPaymentSheet();G&&G.paymentResult===a.SQ.Completed?r.updateWallet(r.splitAndJoin(v)):r.otherService.toast(r.text.payment_cancel)}catch{r.otherService.toast(r.text.payment_cancel)}})()}splitAndJoin(r){return r.split("_").slice(0,2).join("_")}payWithRazorpay(){return(0,f.A)(function*(){})()}}return(d=b).\u0275fac=function(r){return new(r||d)(t.rXU(j.y8),t.rXU(y.G),t.rXU(S.Qq),t.rXU(h.Z))},d.\u0275cmp=t.VBU({type:d,selectors:[["app-payment"]],hostBindings:function(r,p){1&r&&t.bIt("payment.success",function(R){return p.onPaymentSuccess(R)},!1,t.tSv)},decls:5,vars:2,consts:[[1,"ion-no-border"],["slot","end"],["color","medium",3,"click",4,"ngIf"],["class","ion-padding",4,"ngIf"],["color","medium",3,"click"],[1,"ion-padding"],[2,"color","black"],["size","12",2,"text-align","center"],["src","assets/razorpay.gif",2,"width","40%","height","auto","border-radius","25px"],["size","12"],["mode","ios","expand","block","color","dark","id","open-modal","expand","block",3,"click"]],template:function(r,p){1&r&&(t.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),t.DNE(3,P,2,1,"ion-button",2),t.k0s()()(),t.DNE(4,_,16,6,"ion-content",3)),2&r&&(t.R7$(3),t.Y8G("ngIf",p.text),t.R7$(),t.Y8G("ngIf",p.data&&p.text))},dependencies:[c.bv,c.Jm,c.QW,c.hU,c.W9,c.eU,c.ln,c.ai,C.MD,C.bT,C.oe,M.YN],styles:["ion-item[_ngcontent-%COMP%]{border-radius:5px;--min-height:60px;border:1px solid #f1f1f1}ion-toolbar[_ngcontent-%COMP%]{--background: white}ion-thumbnail[_ngcontent-%COMP%]{width:32px;height:32px}"]}),b})()},4264:(N,O,s)=>{s.r(O),s.d(O,{SubscribedCartPage:()=>B});var f=s(467),C=s(177),M=s(4341),c=s(4742),n=s(4613),a=s(4531),F=s(7564),D=s(5864),E=s(5704),T=s(8304),t=s(4438),j=s(2068),y=s(9568);const S=l=>({selected_type:l});function h(l,x){1&l&&t.nrm(0,"ion-skeleton-text",5),2&l&&t.Y8G("animated",!0)}function P(l,x){if(1&l&&(t.j41(0,"div")(1,"ion-grid",2),t.DNE(2,h,1,1,"ion-skeleton-text",4),t.k0s()()),2&l){const i=t.XpG();t.R7$(),t.Y8G("fixed",!0),t.R7$(),t.Y8G("ngForOf",i.fakeData)}}function _(l,x){if(1&l){const i=t.RV6();t.j41(0,"ion-row")(1,"ion-col",6),t.nrm(2,"img",29),t.k0s(),t.j41(3,"ion-col",6)(4,"div",30)(5,"ion-item",31)(6,"ion-label",32)(7,"ion-row")(8,"ion-col",6)(9,"b"),t.EFF(10),t.k0s(),t.j41(11,"span",33),t.EFF(12),t.k0s()(),t.j41(13,"ion-col",34)(14,"span"),t.EFF(15),t.nI1(16,"currency"),t.k0s()()()()(),t.nrm(17,"br")(18,"br"),t.j41(19,"div",35)(20,"ion-label",32)(21,"b"),t.EFF(22,"Description"),t.k0s(),t.nrm(23,"br"),t.k0s(),t.nrm(24,"div",36)(25,"br"),t.j41(26,"div",37)(27,"ion-label",32)(28,"b"),t.EFF(29,"Select Quantity :"),t.k0s()(),t.j41(30,"div",38)(31,"button",39),t.bIt("click",function(){const o=t.eBV(i).$implicit,u=t.XpG(3);return t.Njj(u.decrement(o))}),t.EFF(32,"-"),t.k0s(),t.j41(33,"div",40)(34,"span"),t.EFF(35),t.k0s()(),t.j41(36,"button",41),t.bIt("click",function(){const o=t.eBV(i).$implicit,u=t.XpG(3);return t.Njj(u.increment(o))}),t.EFF(37,"+ "),t.k0s()()()()()()()}if(2&l){const i=x.$implicit,e=t.XpG(3);t.R7$(),t.Y8G("size",e.isMobile?12:4),t.R7$(),t.FS9("src",i.img,t.B4B),t.R7$(),t.Y8G("size",e.isMobile?12:8),t.R7$(5),t.Y8G("size",7),t.R7$(),t.HbH(e.isMobile?"mobile_iname_name":"iname_price"),t.R7$(),t.JRh(i.name),t.R7$(2),t.Lme("",i.subscribe," ",e.text.people_subscribe,""),t.R7$(),t.Y8G("size",5),t.R7$(),t.HbH(e.isMobile?"mobile_iname_price":"iname_price"),t.R7$(),t.Lme("",t.i5U(16,16,i.price,"INR"),"\xa0/\xa0",e.text.day,""),t.R7$(9),t.Y8G("innerHTML",null==i?null:i.desc,t.npT),t.R7$(11),t.JRh(i.qty)}}function k(l,x){if(1&l&&(t.j41(0,"small",42),t.nrm(1,"br"),t.EFF(2),t.k0s()),2&l){const i=t.XpG(3);t.R7$(2),t.JRh(i.address.address)}}function d(l,x){if(1&l){const i=t.RV6();t.j41(0,"span",43),t.bIt("click",function(){const o=t.eBV(i).$implicit,u=t.XpG(3);return t.Njj(u.sub_time=null==o?null:o.id)}),t.nrm(1,"ion-radio",44),t.j41(2,"span"),t.EFF(3),t.k0s()()}if(2&l){const i=x.$implicit,e=t.XpG(3);t.Y8G("ngClass",t.eq3(3,S,e.sub_time===(null==i?null:i.id))),t.R7$(),t.Y8G("value",null==i?null:i.id),t.R7$(2),t.JRh(null==i?null:i.title)}}function b(l,x){if(1&l&&(t.j41(0,"ion-select-option",45)(1,"ion-label",46),t.EFF(2),t.k0s()()),2&l){const i=x.$implicit;t.Y8G("value",i),t.R7$(2),t.JRh(i)}}function m(l,x){if(1&l&&(t.j41(0,"small",47),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&l){const i=t.XpG(3);t.R7$(),t.Lme("",i.text.you_save," ",t.i5U(2,2,i.save,"INR"),"")}}function r(l,x){if(1&l){const i=t.RV6();t.j41(0,"ion-icon",48),t.bIt("click",function(o){t.eBV(i);const u=t.XpG(3);return t.Njj(u.removeDiscount(o))}),t.k0s()}}function p(l,x){if(1&l&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&l){const i=t.XpG(4);t.R7$(),t.JRh(t.i5U(2,1,i.total,"INR"))}}function v(l,x){if(1&l&&(t.j41(0,"s"),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&l){const i=t.XpG(4);t.R7$(),t.JRh(t.i5U(2,1,i.total,"INR"))}}function R(l,x){if(1&l&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&l){const i=t.XpG(4);t.R7$(),t.JRh(t.i5U(2,1,i.total-i.save,"INR"))}}function I(l,x){if(1&l&&(t.j41(0,"h3"),t.EFF(1,"Total Payable Amount\xa0:\xa0"),t.DNE(2,p,3,4,"span",3),t.EFF(3,"\xa0"),t.DNE(4,v,3,4,"s",3),t.EFF(5,"\xa0"),t.DNE(6,R,3,4,"span",3),t.k0s()),2&l){const i=t.XpG(3);t.HbH(i.isMobile?"mobile_total":"total"),t.R7$(2),t.Y8G("ngIf",!i.payble_amount),t.R7$(2),t.Y8G("ngIf",i.payble_amount),t.R7$(2),t.Y8G("ngIf",i.payble_amount)}}function G(l,x){1&l&&(t.j41(0,"p"),t.EFF(1," Note: The amount will be deducted from your wallet balance. "),t.k0s())}function z(l,x){if(1&l){const i=t.RV6();t.j41(0,"ion-row")(1,"ion-col",6)(2,"ion-card-content",7),t.DNE(3,_,38,19,"ion-row",8),t.k0s()(),t.j41(4,"ion-col",9)(5,"div",10)(6,"ion-row")(7,"ion-col",11)(8,"h3",12),t.EFF(9,"Total Amount\xa0:\xa0"),t.j41(10,"span"),t.EFF(11),t.nI1(12,"currency"),t.k0s()()()(),t.j41(13,"ion-row")(14,"ion-col",11)(15,"p",13),t.EFF(16),t.k0s(),t.j41(17,"ion-item",14),t.bIt("click",function(){t.eBV(i);const o=t.XpG(2);return t.Njj(o.getAddress())}),t.j41(18,"label"),t.EFF(19),t.DNE(20,k,3,1,"small",15),t.k0s(),t.nrm(21,"ion-icon",16),t.k0s()()(),t.j41(22,"ion-row")(23,"ion-col",11)(24,"p",13),t.EFF(25),t.k0s(),t.j41(26,"ion-list")(27,"ion-radio-group",17),t.mxI("ngModelChange",function(o){t.eBV(i);const u=t.XpG(2);return t.DH7(u.sub_time,o)||(u.sub_time=o),t.Njj(o)}),t.bIt("ionChange",function(){t.eBV(i);const o=t.XpG(2);return t.Njj(o.startDate())}),t.j41(28,"div",18),t.DNE(29,d,4,5,"span",19),t.k0s()()()()(),t.j41(30,"ion-row")(31,"ion-col",11)(32,"p",13),t.EFF(33),t.k0s(),t.j41(34,"ion-item",20)(35,"ion-select",21),t.mxI("ngModelChange",function(o){t.eBV(i);const u=t.XpG(2);return t.DH7(u.start_date,o)||(u.start_date=o),t.Njj(o)}),t.bIt("ionChange",function(){t.eBV(i);const o=t.XpG(2);return t.Njj(o.startDate())}),t.DNE(36,b,3,2,"ion-select-option",22),t.k0s(),t.nrm(37,"ion-icon",23),t.k0s()()(),t.j41(38,"ion-row")(39,"ion-col",11)(40,"p",13),t.EFF(41),t.k0s(),t.j41(42,"ion-item",14),t.bIt("click",function(){t.eBV(i);const o=t.XpG(2);return t.Njj(o.getOffer())}),t.j41(43,"label"),t.EFF(44),t.DNE(45,m,3,5,"small",24),t.k0s(),t.nrm(46,"ion-icon",25),t.DNE(47,r,1,0,"ion-icon",26),t.k0s()()(),t.j41(48,"ion-row")(49,"ion-col",11),t.DNE(50,I,7,5,"h3",27),t.nrm(51,"br"),t.j41(52,"ion-button",28),t.bIt("click",function(){t.eBV(i);const o=t.XpG(2);return t.Njj(o.placeOrder())}),t.EFF(53),t.k0s(),t.DNE(54,G,2,0,"p",3),t.k0s()()()()()}if(2&l){const i=t.XpG(2);t.R7$(),t.xc7("background-color",i.isMobile?"whitesmoke":""),t.Y8G("size",i.isMobile?12:8),t.R7$(2),t.Y8G("ngForOf",i.data),t.R7$(),t.Y8G("size",i.isMobile?12:4),t.R7$(7),t.JRh(t.i5U(12,23,i.total,"INR")),t.R7$(5),t.JRh(i.text.delivery_address_desc),t.R7$(3),t.SpI("",i.text.delivery_address," "),t.R7$(),t.Y8G("ngIf",i.address),t.R7$(5),t.JRh(i.text.checkout_desc),t.R7$(2),t.R50("ngModel",i.sub_time),t.R7$(2),t.Y8G("ngForOf",null==i.checkout_data?null:i.checkout_data.time),t.R7$(4),t.JRh(i.text.starting_date_desc),t.R7$(2),t.FS9("label",i.isMobile&&i.start_date?i.start_date:i.text.start_date),t.R50("ngModel",i.start_date),t.R7$(),t.Y8G("ngForOf",null==i.checkout_data?null:i.checkout_data.dates),t.R7$(5),t.JRh(i.text.discount_desc),t.R7$(3),t.SpI("",i.text.discount_offers," "),t.R7$(),t.Y8G("ngIf",i.save),t.R7$(2),t.Y8G("ngIf",i.save),t.R7$(3),t.Y8G("ngIf",i.validate()),t.R7$(3),t.JRh(i.text.checkout_button),t.R7$(),t.Y8G("ngIf",i.validate())}}function w(l,x){if(1&l&&(t.j41(0,"div")(1,"ion-card"),t.DNE(2,z,55,26,"ion-row",3),t.k0s()()),2&l){const i=t.XpG();t.R7$(2),t.Y8G("ngIf",i.data)}}function A(l,x){if(1&l&&(t.j41(0,"div"),t.nrm(1,"br")(2,"br")(3,"img",49),t.j41(4,"h1",50),t.EFF(5),t.k0s(),t.j41(6,"div",51)(7,"ion-button",52),t.EFF(8),t.k0s()()()),2&l){const i=t.XpG();t.R7$(5),t.JRh(i.text.cart_empty),t.R7$(2),t.Y8G("expand",i.isMobile?"block":""),t.R7$(),t.JRh(i.text.start_item)}}(0,a.kz)();let B=(()=>{var l;class x{constructor(e,o,u){this.server=e,this.otherService=o,this.modalCtrl=u,this.fakeData=[1,2,3,4],this.selectedDay=[],this.hasClick=!1,this.isMobile=!1,this.total=0,this.payble_amount=0;const g=localStorage.getItem("app_lang");null!==g&&(this.text=JSON.parse(g),this.text=this.text.text),this.checkScreenSize()}onResize(e){this.checkScreenSize()}checkScreenSize(){this.isMobile=window.innerWidth<=768}ngOnInit(){this.user_id=localStorage.getItem("user_id")}ionViewDidEnter(){this.otherService.statusBar("#ffffff",2),this.loadData()}loadData(){var e=this;return(0,f.A)(function*(){e.server.getCart().subscribe(o=>{const u=localStorage.getItem("subscribed_items");e.data=u?[JSON.parse(u)]:[],e.data.map(g=>{g.selected_price=Number(g.price)*g.qty}),e.CalculateTotal(),e.getSavedAddress(),e.working_days=o.working_day,e.selectedDay=o.days})})()}increment(e){if(e.qty<10){const o=this.data.find(u=>u.id===e.id);o.qty+=1,o.selected_price=Number(e.price)*Number(o.qty),localStorage.setItem("subscribed_items",JSON.stringify(o)),this.CalculateTotal()}}decrement(e){if(e.qty>1){const o=this.data.find(u=>u.id===e.id);o.qty-=1,o.selected_price=Number(e.price)*Number(o.qty),localStorage.setItem("subscribed_items",JSON.stringify(o)),this.CalculateTotal()}}CalculateTotal(){this.total=this.data.reduce((e,o)=>e+(Number(o.selected_price)||0),0),1==this.sub_time?this.total=1*this.total:2==this.sub_time?this.total=6*this.total:3==this.sub_time?this.total=12*this.total:4==this.sub_time&&(this.total=24*this.total)}getSavedAddress(){this.server.checkoutData().subscribe(e=>{this.checkout_data=e.data,this.savedAddress=this.checkout_data.address})}getAddress(){var e=this;return(0,f.A)(function*(){if(e.user_id){var o;const u={data:e.savedAddress,store_id:null!==(o=e.data)&&void 0!==o&&null!==(o=o.store)&&void 0!==o&&o.id?e.data.store.id:1},g=yield e.modalCtrl.create({component:F.AddressPage,animated:!0,mode:"ios",componentProps:u});return g.onDidDismiss().then($=>{$.data.id&&(e.address=$.data)}),yield g.present()}e.continue()})()}startDate(){var e=this;return(0,f.A)(function*(){if(!e.sub_time)return e.otherService.toast(e.text.sub_time);if(!e.start_date)return;const o={plan:e.sub_time,start_date:e.start_date,cart_no:localStorage.getItem("cart_no"),user_id:localStorage.getItem("user_id"),store_id:e.checkout_data.store.id,item_id:e.data[0].id,qty:e.data[0].qty};e.CalculateTotal(),e.server.getSubAmount(o).subscribe(u=>{e.cal=u,e.cal.summery=[e.cal.summery[0]],e.cal.summery.map(g=>{g.item_id=e.data[0].id,g.item=e.data[0].name})})})()}getOffer(){var e=this;return(0,f.A)(function*(){const o=yield e.modalCtrl.create({component:D.OfferPage,animated:!0,mode:"ios",componentProps:{data:e.checkout_data.offer,type:"SUBSCRIPTION"}});return o.onDidDismiss().then(u=>{u.data.code&&(e.offer=u.data,e.applyOffer())}),yield o.present()})()}applyOffer(){var e=this;return(0,f.A)(function*(){if(1==e.offer.type){const o=e.cal.total*e.offer.value/100;e.payble_amount=e.total-o,e.save=o.toFixed(1)}else e.payble_amount=e.total-e.offer.value,e.save=e.offer.value})()}validate(){return!!(this.sub_time&&this.start_date&&this.address)}placeOrder(){var e=this;return(0,f.A)(function*(){if(e.validate()){var o=e.save?e.total-Number(e.save):e.total;o>e.checkout_data.user.wallet?e.openpaymentsModel({amount:o-e.checkout_data.user.wallet,stripe_key:e.checkout_data.stripe_id}):e.checkout()}else e.otherService.toast(e.text.all_field)})()}openpaymentsModel(e){var o=this;return(0,f.A)(function*(){const u=yield o.modalCtrl.create({component:E.PaymentPage,animated:!0,mode:"ios",componentProps:{data:e}});return u.onDidDismiss().then(g=>{console.log("data",g.data.status),"success"==g.data.status?o.checkout():o.otherService.toast(o.text.payment_cancel)}),yield u.present()})()}checkout(){var e=this;return(0,f.A)(function*(){e.hasClick=!0;const o={user_id:localStorage.getItem("user_id"),cart_no:localStorage.getItem("cart_no"),cal:e.cal,address:e.address.id,plan:e.sub_time,total:e.save?e.total-Number(e.save):e.total,discount:e.save,store_id:e.checkout_data.store.id,notes:localStorage.getItem("order_notes")&&"undefined"!=localStorage.getItem("order_notes")?localStorage.getItem("order_notes"):null};e.server.placeOrder(o).subscribe(u=>{1==u.done?(localStorage.removeItem("order_notes"),e.otherService.triggerLoadData.emit(),e.openSuccessModel()):e.otherService.toast(u.error),e.hasClick=!1})})()}openSuccessModel(){var e=this;return(0,f.A)(function*(){const o=yield e.modalCtrl.create({component:T.SuccessPage,animated:!0,mode:"ios"});return o.onDidDismiss().then(u=>{u.data||e.otherService.redirect("/tabs/home")}),yield o.present()})()}removeDiscount(e){e.stopPropagation(),this.save=0,this.payble_amount=0}remove(e){var o=this;return(0,f.A)(function*(){o.otherService.confirm().then(u=>{"ok"===u&&o.server.getCart(e).subscribe(g=>{o.data=g.data,o.data.map($=>{$.selected_price=$.price}),o.CalculateTotal(),o.otherService.toast(o.text.removed)})})})()}selectDay(e,o){var u=this;return(0,f.A)(function*(){let g=u.checkSelected(e,o);g?(g=999==g?0:g,u.selectedDay.splice(g,1)):u.selectedDay.push({day:e,id:o.id})})()}checkSelected(e,o,u=!1){for(var g=0;g<this.selectedDay.length;g++)if(this.selectedDay[g].day===e&&this.selectedDay[g].id==o.id)return 0==g?999:g;return!1}continue(){var e=this;return(0,f.A)(function*(){localStorage.setItem("order_notes",e.notes),e.hasClick=!0,e.server.updateDays({days:e.selectedDay}).subscribe(o=>{e.hasClick=!1,e.otherService.redirect("checkout/0")})})()}}return(l=x).\u0275fac=function(e){return new(e||l)(t.rXU(j.Z),t.rXU(y.G),t.rXU(c.W3))},l.\u0275cmp=t.VBU({type:l,selectors:[["app-cart"]],hostBindings:function(e,o){1&e&&t.bIt("resize",function(g){return o.onResize(g)},!1,t.tSv)},decls:7,vars:4,consts:[[1,"ion-no-border"],["color","dark"],[3,"fixed"],[4,"ngIf"],["class","sek",3,"animated",4,"ngFor","ngForOf"],[1,"sek",3,"animated"],[3,"size"],[1,"scrollable-content"],[4,"ngFor","ngForOf"],[1,"checkout_page",3,"size"],[1,"scrollable-content",2,"padding","20px"],["size","12"],[1,"total"],[1,"desc"],["lines","none",1,"address",3,"click"],["class","address_1",4,"ngIf"],["name","location-outline","slot","start","color","dark"],[3,"ngModelChange","ionChange","ngModel"],[1,"radio-container"],["class","subscribed_type",3,"ngClass","click",4,"ngFor","ngForOf"],["lines","none",1,"address"],["placeholder","Select","interface","popover","name","start_date",3,"ngModelChange","ionChange","label","ngModel"],[3,"value",4,"ngFor","ngForOf"],["name","calendar-outline","slot","start","color","dark"],["class","discount",4,"ngIf"],["name","receipt-outline","slot","start","color","dark"],["name","trash","slot","end","class","remove_discount",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["mode","ios","expand","block","color","dark","id","open-modal","expand","block",3,"click"],[2,"margin-top","15px",3,"src"],[1,"ion-padding"],["lines","none",2,"margin-top","-20px","margin-left","-20px"],[1,"ion-text-wrap"],[2,"display","block","color","gray","font-size","14px"],[2,"text-align","right",3,"size"],[1,"description"],[3,"innerHTML"],[2,"margin-top","12px"],[1,"quantity-field"],[1,"value-button","decrease-button",3,"click"],[1,"number"],[1,"value-button","increase-button",3,"click"],[1,"address_1"],[1,"subscribed_type",3,"click","ngClass"],[1,"hidden-radio",3,"value"],[3,"value"],[1,"item-label"],[1,"discount"],["name","trash","slot","end",1,"remove_discount",3,"click"],["src","assets/empty.webp",2,"width","70%","margin-left","15%"],["align","center"],[1,"ion-padding",2,"text-align","center"],["routerLink","/tabs/home","mode","ios","color","dark",3,"expand"]],template:function(e,o){1&e&&(t.j41(0,"ion-header",0),t.nrm(1,"ion-toolbar",1),t.k0s(),t.j41(2,"ion-content")(3,"ion-grid",2),t.DNE(4,P,3,2,"div",3)(5,w,3,1,"div",3)(6,A,9,3,"div",3),t.k0s()()),2&e&&(t.R7$(3),t.Y8G("fixed",!!o.isMobile),t.R7$(),t.Y8G("ngIf",!o.data),t.R7$(),t.Y8G("ngIf",o.data&&o.data.length>0),t.R7$(),t.Y8G("ngIf",o.data&&0==o.data.length))},dependencies:[c.bv,c.Jm,c.b_,c.I9,c.hU,c.W9,c.lO,c.eU,c.iq,c.uz,c.he,c.nf,c.KO,c.f0,c.ln,c.Nm,c.Ip,c.ds,c.ai,c.Je,c.N7,C.MD,C.YU,C.Sq,C.bT,C.oe,M.YN,M.BC,M.vS,n.Wk],styles:["ion-content[_ngcontent-%COMP%]{--background: var(--ion-color-light) }.scrollable-content[_ngcontent-%COMP%]{height:84vh;overflow-y:auto;scrollbar-width:thin;scrollbar-color:transparent transparent}.scrollable-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.radio-container[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;overflow-x:auto;-webkit-overflow-scrolling:touch;gap:10px;padding:10px 0}.subscribed_type[_ngcontent-%COMP%]{display:flex;align-items:center;border:1px solid #ccc;padding:8px 12px;border-radius:8px;white-space:nowrap;cursor:pointer;transition:background-color .3s;flex-shrink:0}.selected_type[_ngcontent-%COMP%]{background-color:var(--ion-color-dark)!important;color:#fff;border-color:var(--ion-color-dark)!important}.hidden-radio[_ngcontent-%COMP%]{display:none}.sek[_ngcontent-%COMP%]{width:96%;height:50px;border-radius:10px;margin-left:2%;margin-top:8%}.desc[_ngcontent-%COMP%]{font-size:12px;color:gray;display:block}.cart_desc[_ngcontent-%COMP%]{display:block;margin-top:5px;color:gray;font-size:15px}.msg[_ngcontent-%COMP%]{height:100px;margin-top:20px}.description[_ngcontent-%COMP%]{color:#000;margin-top:-25px}.iname_price[_ngcontent-%COMP%]{font-size:25px;font-weight:700;color:var(--ion-color-dark)}.mobile_iname_price[_ngcontent-%COMP%]{font-size:12px!important;font-weight:700;color:var(--ion-color-dark)}.mobile_iname_name[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--ion-color-dark)}.total[_ngcontent-%COMP%]{font-weight:600;font-size:20px;text-align:right;color:#000}.mobile_total[_ngcontent-%COMP%]{font-weight:600;font-size:15px;text-align:right;color:#000}.trash_icon[_ngcontent-%COMP%]{margin-top:5px;color:#d00101;cursor:pointer;font-size:20px}.quantity-field[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:120px;height:35px}.quantity-field[_ngcontent-%COMP%]   .value-button[_ngcontent-%COMP%]{border:1px solid #ddd;margin:0;width:50px;height:100%;padding:0;background:#eee;outline:none;cursor:pointer}.quantity-field[_ngcontent-%COMP%]   .value-button[_ngcontent-%COMP%]:hover{background:#e6e6e6}.quantity-field[_ngcontent-%COMP%]   .value-button[_ngcontent-%COMP%]:active{background:#d2d2d2}.quantity-field[_ngcontent-%COMP%]   .decrease-button[_ngcontent-%COMP%]{margin-right:-4px;border-radius:8px 0 0 8px;color:#d00101;font-size:30px;cursor:pointer}.quantity-field[_ngcontent-%COMP%]   .increase-button[_ngcontent-%COMP%]{margin-left:-4px;border-radius:0 8px 8px 0;color:green;font-size:25px;cursor:pointer}.number[_ngcontent-%COMP%]{border-top:1px solid #ddd;border-bottom:1px solid #ddd;text-align:center;background-color:1px solid #fff;margin:0;width:60px;height:100%;padding:0;outline:none;display:inline;font-size:20px;color:#000}.number[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:50px!important}.address[_ngcontent-%COMP%]{--min-height: 25px !important;--padding-start: 10px;--padding-end: 10px;font-size:14px;border:1px solid var(--ion-color-dark);width:100%;border-radius:10px;border-width:1px;color:#000;cursor:pointer}ion-content[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%], ion-input[_ngcontent-%COMP%], ion-accordion[_ngcontent-%COMP%], ion-list[_ngcontent-%COMP%], ion-select[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important}.cart_item[_ngcontent-%COMP%]{margin-top:15px}ion-card[_ngcontent-%COMP%]{box-shadow:0 5px 15px #0000001a}.checkout_page[_ngcontent-%COMP%]{border-left:3px solid var(--ion-color-light)}.discount[_ngcontent-%COMP%]{display:block;margin-top:5px;color:red}.remove_discount[_ngcontent-%COMP%]{color:red;font-size:16px;cursor:pointer;margin-top:30px}.rating[_ngcontent-%COMP%]{display:block;margin-top:5px}.star[_ngcontent-%COMP%]{font-size:15px;margin:2px}.dtime[_ngcontent-%COMP%]{font-size:17px;padding:0 10px}img[_ngcontent-%COMP%]{border-radius:10px}"]}),x})()},8304:(N,O,s)=>{s.r(O),s.d(O,{SuccessPage:()=>j});var f=s(467),C=s(177),M=s(4341),c=s(4742),n=s(4613),a=s(4438),F=s(9568);function D(y,S){if(1&y){const h=a.RV6();a.j41(0,"ion-button",4),a.bIt("click",function(){a.eBV(h);const _=a.XpG();return a.Njj(_.close())}),a.EFF(1),a.k0s()}if(2&y){const h=a.XpG();a.R7$(),a.JRh(h.text.cancel)}}function E(y,S){1&y&&a.nrm(0,"ion-col",16)}function T(y,S){1&y&&a.nrm(0,"ion-col",16)}function t(y,S){if(1&y){const h=a.RV6();a.j41(0,"ion-content",5)(1,"ion-grid",6)(2,"ion-row",7)(3,"ion-col",8),a.nrm(4,"img",9),a.k0s(),a.j41(5,"ion-col",8)(6,"h1",10),a.EFF(7),a.k0s(),a.j41(8,"p",11),a.EFF(9),a.k0s(),a.nrm(10,"br")(11,"br"),a.j41(12,"ion-row",7),a.DNE(13,E,1,0,"ion-col",12),a.j41(14,"ion-col",8)(15,"ion-button",13),a.bIt("click",function(){a.eBV(h);const _=a.XpG();return a.Njj(_.close())}),a.j41(16,"span",14),a.EFF(17),a.k0s()()(),a.j41(18,"ion-col",8)(19,"ion-button",15),a.bIt("click",function(){a.eBV(h);const _=a.XpG();return a.Njj(_.close())}),a.j41(20,"span",14),a.EFF(21),a.k0s()()(),a.DNE(22,T,1,0,"ion-col",12),a.k0s()()()()()}if(2&y){const h=a.XpG();a.R7$(),a.Y8G("fixed",!0),a.R7$(2),a.Y8G("size",12),a.R7$(2),a.Y8G("size",12),a.R7$(2),a.JRh(h.text.success_title),a.R7$(2),a.JRh(h.text.success_desc),a.R7$(4),a.Y8G("ngIf",!h.isMobile),a.R7$(),a.Y8G("size",h.isMobile?6:3),a.R7$(3),a.JRh(h.text.go_back),a.R7$(),a.Y8G("size",h.isMobile?6:3),a.R7$(3),a.JRh(h.text.my_order),a.R7$(),a.Y8G("ngIf",!h.isMobile)}}let j=(()=>{var y;class S{constructor(P){this.otherService=P,this.isMobile=!1;const _=localStorage.getItem("app_lang");null!==_&&(this.text=JSON.parse(_),this.text=this.text.text),this.checkScreenSize()}onResize(P){this.checkScreenSize()}checkScreenSize(){this.isMobile=window.innerWidth<=768}ngOnInit(){}close(P=[]){var _=this;return(0,f.A)(function*(){_.otherService.closeModel(P)})()}}return(y=S).\u0275fac=function(P){return new(P||y)(a.rXU(F.G))},y.\u0275cmp=a.VBU({type:y,selectors:[["app-success"]],hostBindings:function(P,_){1&P&&a.bIt("resize",function(d){return _.onResize(d)},!1,a.tSv)},decls:5,vars:2,consts:[[1,"ion-no-border"],["slot","end"],["color","medium",3,"click",4,"ngIf"],["class","ion-padding",4,"ngIf"],["color","medium",3,"click"],[1,"ion-padding"],[3,"fixed"],[2,"text-align","center"],[3,"size"],["src","assets/confirm.gif",2,"width","22%","margin-top","50px"],["align","center",1,"headTitle"],["align","center",2,"color","gray"],["size","3",4,"ngIf"],["shape","round","color","dark","routerLink","/tabs/home","routerDirection","root",3,"click"],[2,"white-space","nowrap"],["shape","round","color","dark","routerLink","/tabs/subscription","routerDirection","forward",3,"click"],["size","3"]],template:function(P,_){1&P&&(a.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),a.DNE(3,D,2,1,"ion-button",2),a.k0s()()(),a.DNE(4,t,23,11,"ion-content",3)),2&P&&(a.R7$(3),a.Y8G("ngIf",_.text),a.R7$(),a.Y8G("ngIf",_.text))},dependencies:[c.bv,c.Jm,c.QW,c.hU,c.W9,c.lO,c.eU,c.ln,c.ai,c.N7,C.MD,C.bT,M.YN,n.Wk],styles:["ion-content[_ngcontent-%COMP%]{height:80vh;overflow-y:auto;border-right:3px solid whitesmoke;scrollbar-width:thin;scrollbar-color:transparent transparent}ion-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}"]}),S})()}}]);