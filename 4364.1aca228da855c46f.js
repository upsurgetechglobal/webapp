"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4364],{4364:(b,g,c)=>{c.r(g),c.d(g,{OtpPage:()=>I});var u=c(177),a=c(4341),_=c(4742),t=c(4438),d=c(2068),h=c(9568);function f(s,p){1&s&&t.nrm(0,"ion-col",20)}function m(s,p){if(1&s){const r=t.RV6();t.j41(0,"ion-row",21),t.nrm(1,"ion-col",10),t.j41(2,"ion-col",22)(3,"ion-input",23,1),t.mxI("ngModelChange",function(e){t.eBV(r);const n=t.XpG();return t.DH7(n.otp.otp_1,e)||(n.otp.otp_1=e),t.Njj(e)}),t.bIt("ionInput",function(e){t.eBV(r);const n=t.sdS(7),i=t.XpG();return t.Njj(i.otpChange(e,n,""))})("keydown",function(e){t.eBV(r);const n=t.XpG();return t.Njj(n.handleKeyDown(e,"",""))}),t.k0s()(),t.j41(5,"ion-col",22)(6,"ion-input",24,2),t.mxI("ngModelChange",function(e){t.eBV(r);const n=t.XpG();return t.DH7(n.otp.otp_2,e)||(n.otp.otp_2=e),t.Njj(e)}),t.bIt("ionInput",function(e){t.eBV(r);const n=t.sdS(4),i=t.sdS(10),l=t.XpG();return t.Njj(l.otpChange(e,i,n))})("keydown",function(e){t.eBV(r);const n=t.sdS(4),i=t.XpG();return t.Njj(i.handleKeyDown(e,"",n))}),t.k0s()(),t.j41(8,"ion-col",22)(9,"ion-input",25,3),t.mxI("ngModelChange",function(e){t.eBV(r);const n=t.XpG();return t.DH7(n.otp.otp_3,e)||(n.otp.otp_3=e),t.Njj(e)}),t.bIt("ionInput",function(e){t.eBV(r);const n=t.sdS(7),i=t.sdS(13),l=t.XpG();return t.Njj(l.otpChange(e,i,n))})("keydown",function(e){t.eBV(r);const n=t.sdS(7),i=t.XpG();return t.Njj(i.handleKeyDown(e,"",n))}),t.k0s()(),t.j41(11,"ion-col",22)(12,"ion-input",26,4),t.mxI("ngModelChange",function(e){t.eBV(r);const n=t.XpG();return t.DH7(n.otp.otp_4,e)||(n.otp.otp_4=e),t.Njj(e)}),t.bIt("ionInput",function(e){t.eBV(r);const n=t.sdS(10),i=t.XpG();return t.Njj(i.otpChange(e,"",n))})("keydown",function(e){t.eBV(r);const n=t.sdS(10),i=t.XpG();return t.Njj(i.handleKeyDown(e,"",n))}),t.k0s()(),t.nrm(14,"ion-col",22),t.k0s()}if(2&s){const r=t.XpG();t.R7$(),t.Y8G("size",r.isMobile?1:2),t.R7$(2),t.R50("ngModel",r.otp.otp_1),t.R7$(3),t.R50("ngModel",r.otp.otp_2),t.R7$(3),t.R50("ngModel",r.otp.otp_3),t.R7$(3),t.R50("ngModel",r.otp.otp_4)}}function O(s,p){1&s&&(t.j41(0,"p",27),t.nrm(1,"ion-spinner",28),t.k0s())}function x(s,p){if(1&s&&(t.j41(0,"ion-button",29),t.EFF(1),t.k0s()),2&s){const r=t.XpG();t.R7$(),t.JRh(r.text.verify)}}function k(s,p){1&s&&t.nrm(0,"ion-col",20)}let I=(()=>{var s;class p{constructor(o,e){this.server=o,this.otherService=e,this.OTP="",this.hasClick=!1,this.isMobile=!1,this.otp={otp_1:"",otp_2:"",otp_3:"",otp_4:""};const n=localStorage.getItem("user_res");null!==n&&(this.res=JSON.parse(n));const i=localStorage.getItem("app_lang");null!==i&&(this.text=JSON.parse(i),this.text=this.text.text),this.title=3==this.res.codeSent?this.text.verify_email:this.text.verify_phone,this.desc=3==this.res.codeSent?this.text.email_code_sent:this.text.phone_code_sent,this.checkScreenSize()}onResize(o){this.checkScreenSize()}checkScreenSize(){this.isMobile=window.innerWidth<=768}ngOnInit(){}ionViewWillEnter(){this.otherService.statusBar("#ffc927",2)}otpChange(o,e,n){const i=o.target.value;/^\d$/.test(i)?i.length>0&&e?e.setFocus():0===i.length&&n&&n.setFocus():o.target.value=""}handleKeyDown(o,e,n){"Backspace"===o.key&&""===o.target.value&&n&&n.setFocus()}verify(o){if(!(o.otp_1&&o.otp_2&&o.otp_3&&o.otp_4))return this.otherService.toast(this.text.valid_otp);this.hasClick=!0,this.server.verifyOtp(o,this.res.user.id).subscribe(e=>{this.hasClick=!1,e.status?0==this.res.user.status?(localStorage.setItem("user_id",e.user.id),localStorage.setItem("token",e.token),localStorage.setItem("user_data",JSON.stringify(e.user)),this.otherService.toast(this.text.account_created),this.otherService.triggerLoadData.emit(),localStorage.getItem("cart_no")&&null!=localStorage.getItem("cart_no")?this.otherService.redirect("cart","root"):this.otherService.redirect("account","root")):(localStorage.setItem("temp_user_id",e.user.id),this.otherService.redirect("password","root")):this.otherService.toast(e.error)})}resend(){this.hasClick=!0,this.server.resendCode(this.res.user.id).subscribe(o=>{this.hasClick=!1,this.otherService.toast(this.text.new_code_sent)})}}return(s=p).\u0275fac=function(o){return new(o||s)(t.rXU(d.Z),t.rXU(h.G))},s.\u0275cmp=t.VBU({type:s,selectors:[["app-otp"]],hostBindings:function(o,e){1&o&&t.bIt("resize",function(i){return e.onResize(i)},!1,t.tSv)},decls:30,vars:12,consts:[["form","ngForm"],["otp1",""],["otp2",""],["otp3",""],["otp4",""],[1,"ion-no-border"],["color","dark"],[1,"ion-padding",3,"fullscreen"],[3,"fixed"],["size","3",4,"ngIf"],[3,"size"],[1,"signup-card"],[3,"ngSubmit"],[1,"headTitle"],[2,"font-size","14px","color","gray","text-align","center"],["style","text-align: center;",4,"ngIf"],["align","center",4,"ngIf"],["class","verify-button","mode","ios","expand","block","color","dark","type","submit",4,"ngIf"],["align","center",2,"color","gray","font-size","14px","cursor","pointer"],[3,"click"],["size","3"],[2,"text-align","center"],["size","2"],["type","tel","maxlength","1","name","otp_1",3,"ngModelChange","ionInput","keydown","ngModel"],["type","tel","maxlength","1","name","otp_2",3,"ngModelChange","ionInput","keydown","ngModel"],["type","tel","maxlength","1","name","otp_3",3,"ngModelChange","ionInput","keydown","ngModel"],["type","tel","maxlength","1","name","otp_4",3,"ngModelChange","ionInput","keydown","ngModel"],["align","center"],["name","crescent"],["mode","ios","expand","block","color","dark","type","submit",1,"verify-button"]],template:function(o,e){if(1&o){const n=t.RV6();t.j41(0,"ion-header",5)(1,"ion-toolbar",6)(2,"ion-buttons"),t.nrm(3,"ion-back-button"),t.k0s()()(),t.j41(4,"ion-content",7)(5,"ion-grid",8)(6,"ion-row"),t.DNE(7,f,1,0,"ion-col",9),t.j41(8,"ion-col",10)(9,"ion-card",11)(10,"form",12,0),t.bIt("ngSubmit",function(){t.eBV(n);const l=t.sdS(11);return t.Njj(e.verify(l.value))}),t.j41(12,"h2",13),t.EFF(13),t.k0s(),t.j41(14,"p",14),t.EFF(15),t.k0s(),t.nrm(16,"br"),t.DNE(17,m,15,5,"ion-row",15)(18,O,2,0,"p",16),t.nrm(19,"br")(20,"br"),t.DNE(21,x,2,1,"ion-button",17),t.nrm(22,"br"),t.j41(23,"p",18),t.EFF(24),t.j41(25,"a",19),t.bIt("click",function(){return t.eBV(n),t.Njj(e.resend())}),t.EFF(26),t.k0s()(),t.nrm(27,"br")(28,"br"),t.k0s()()(),t.DNE(29,k,1,0,"ion-col",9),t.k0s()()()}2&o&&(t.R7$(4),t.Y8G("fullscreen",!0),t.R7$(),t.Y8G("fixed",!0),t.R7$(2),t.Y8G("ngIf",!e.isMobile),t.R7$(),t.Y8G("size",e.isMobile?11:6),t.R7$(5),t.JRh(e.title),t.R7$(2),t.JRh(e.desc),t.R7$(2),t.Y8G("ngIf",!e.hasClick),t.R7$(),t.Y8G("ngIf",e.hasClick),t.R7$(3),t.Y8G("ngIf",!e.hasClick),t.R7$(3),t.SpI("",e.text.dont_otp," "),t.R7$(2),t.JRh(e.text.resend_code),t.R7$(3),t.Y8G("ngIf",!e.isMobile))},dependencies:[_.bv,_.Jm,_.QW,_.b_,_.hU,_.W9,_.lO,_.eU,_.$w,_.ln,_.w2,_.ai,_.Gw,_.el,u.MD,u.bT,a.YN,a.qT,a.BC,a.cb,a.tU,a.vS,a.cV],styles:["ion-content[_ngcontent-%COMP%]{--background: var(--ion-color-light)}p[_ngcontent-%COMP%]{color:gray}ion-input[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:10px;text-align:center;--padding-start: 10px;--padding-end: 10px;font-size:20px;color:#000}@media (max-width: 767px){ion-input[_ngcontent-%COMP%]{margin-left:1.8rem}}.signup-card[_ngcontent-%COMP%]{width:100%;border-radius:12px;box-shadow:0 4px 10px #0003;background:#fff}.verify-button[_ngcontent-%COMP%]{width:60%;margin:0 auto;display:block}.headTitle[_ngcontent-%COMP%]{text-align:center}"]}),p})()}}]);