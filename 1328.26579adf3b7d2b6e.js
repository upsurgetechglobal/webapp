"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1328,5704],{3923:(T,y,c)=>{c.d(y,{$o:()=>g,_G:()=>p,Vq:()=>u,SQ:()=>l});var g=function(s){return s.Loaded="applePayLoaded",s.FailedToLoad="applePayFailedToLoad",s.Completed="applePayCompleted",s.Canceled="applePayCanceled",s.Failed="applePayFailed",s.DidSelectShippingContact="applePayDidSelectShippingContact",s.DidCreatePaymentMethod="applePayDidCreatePaymentMethod",s}(g||{}),p=function(s){return s.Loaded="googlePayLoaded",s.FailedToLoad="googlePayFailedToLoad",s.Completed="googlePayCompleted",s.Canceled="googlePayCanceled",s.Failed="googlePayFailed",s}(p||{}),u=function(s){return s.Loaded="paymentFlowLoaded",s.FailedToLoad="paymentFlowFailedToLoad",s.Opened="paymentFlowOpened",s.Created="paymentFlowCreated",s.Completed="paymentFlowCompleted",s.Canceled="paymentFlowCanceled",s.Failed="paymentFlowFailed",s}(u||{}),l=function(s){return s.Loaded="paymentSheetLoaded",s.FailedToLoad="paymentSheetFailedToLoad",s.Completed="paymentSheetCompleted",s.Canceled="paymentSheetCanceled",s.Failed="paymentSheetFailed",s}(l||{})},5704:(T,y,c)=>{c.r(y),c.d(y,{PaymentPage:()=>m});var g=c(467),p=c(177),u=c(4341),l=c(4742),s=c(5083),t=c(3923);const x=(0,s.F3)("Stripe",{web:()=>c.e(1651).then(c.bind(c,1651)).then(n=>new n.StripeWeb)});var v=c(1594),R=c(9350),e=c(4438),b=c(3656),F=c(9568),k=c(1626),j=c(2068);function I(n,d){if(1&n){const a=e.RV6();e.j41(0,"ion-button",4),e.bIt("click",function(){e.eBV(a);const i=e.XpG();return e.Njj(i.close())}),e.EFF(1),e.k0s()}if(2&n){const a=e.XpG();e.R7$(),e.JRh(a.text.cancel)}}function D(n,d){1&n&&e.nrm(0,"ion-spinner",13)}function M(n,d){if(1&n){const a=e.RV6();e.j41(0,"ion-item",8),e.bIt("click",function(){e.eBV(a);const i=e.XpG(2);return e.Njj(i.paymentSheet())}),e.j41(1,"ion-thumbnail",9),e.nrm(2,"img",12),e.k0s(),e.j41(3,"ion-label"),e.EFF(4),e.k0s(),e.DNE(5,D,1,0,"ion-spinner",11),e.k0s()}if(2&n){const a=e.XpG(2);e.R7$(4),e.JRh(a.text.credit),e.R7$(),e.Y8G("ngIf",1==a.payment_method)}}function S(n,d){1&n&&e.nrm(0,"ion-spinner",13)}function r(n,d){if(1&n){const a=e.RV6();e.j41(0,"ion-content",5)(1,"h3"),e.EFF(2),e.j41(3,"ion-badge",6),e.EFF(4),e.k0s()(),e.nrm(5,"br")(6,"br"),e.DNE(7,M,6,2,"ion-item",7),e.nrm(8,"br"),e.j41(9,"ion-item",8),e.bIt("click",function(){e.eBV(a);const i=e.XpG();return e.Njj(i.payWithRazorpay())}),e.j41(10,"ion-label"),e.EFF(11),e.k0s(),e.j41(12,"ion-thumbnail",9),e.nrm(13,"img",10),e.k0s(),e.DNE(14,S,1,0,"ion-spinner",11),e.k0s(),e.nrm(15,"br")(16,"br")(17,"br")(18,"br"),e.j41(19,"b"),e.EFF(20,"For stripe use these Test card detail : "),e.k0s(),e.j41(21,"p"),e.EFF(22,"Card No : 4242 4242 4242 4242"),e.k0s(),e.j41(23,"p"),e.EFF(24,"Exp. 12/25 CVV : 321"),e.k0s()()}if(2&n){const a=e.XpG();e.R7$(2),e.SpI("",a.text.select_payment_method," "),e.R7$(2),e.Lme("",a.setting.currency,"",a.data.amount,""),e.R7$(3),e.Y8G("ngIf",a.setting.stripe_key),e.R7$(4),e.SpI(" ",a.text.upi,""),e.R7$(3),e.Y8G("ngIf",2==a.payment_method)}}let m=(()=>{var n;class d{constructor(o,i,_,h){this.navParams=o,this.otherService=i,this.http=_,this.server=h,this.data=o.get("data");const f=localStorage.getItem("admin_setting"),P=localStorage.getItem("user_data");null!==f&&(this.setting=JSON.parse(f)),null!==P&&(this.user=JSON.parse(P));const G=localStorage.getItem("app_lang");null!==G&&(this.text=JSON.parse(G),this.text=this.text.text),x.initialize({publishableKey:this.data.stripe_key}),this.meta={counsumer_id:778383,consumer_mac:"sdjksfhsd887f8s"},this.customizations={title:"Wallet Recharge",description:"Wallet Recharge",logo:"https://dicont.s3.amazonaws.com/static/flow-logos/flutterwave-logo.png"},this.customerDetails={name:this.user.name,email:this.user.email,phone_number:this.user.phone}}ngOnInit(){}updateWallet(o=null){var i=this;return(0,g.A)(function*(){const _={amount:i.data.amount,user_id:localStorage.getItem("user_id"),trans_id:o,payment_method:i.payment_method,notes:"Wallet Recharge"};i.server.updateWallet(_).subscribe(h=>{i.payment_method=null,i.otherService.toast(i.text.payment_added),i.close(o)})})()}close(o=null){var i=this;return(0,g.A)(function*(){i.otherService.closeModel(o)})()}httpPost(){const o={user:localStorage.getItem("user_id"),total:this.data.amount};return this.http.post(this.server.getApiUrl()+"stripePayment",o).pipe((0,v.$)())}paymentSheet(){var o=this;return(0,g.A)(function*(){o.payment_method=1;try{x.addListener(t.SQ.Completed,()=>{console.log("PaymentSheetEventsEnum.Completed")});const i=o.httpPost();console.log(i);const{paymentIntent:_,ephemeralKey:h,customer:f}=yield function C(n,d){const a="object"==typeof d;return new Promise((o,i)=>{let h,_=!1;n.subscribe({next:f=>{h=f,_=!0},error:i,complete:()=>{_?o(h):a?o(d.defaultValue):i(new R.G)}})})}(i);yield x.createPaymentSheet({paymentIntentClientSecret:_,customerId:f,customerEphemeralKeySecret:h,merchantDisplayName:o.setting.app_name});const P=yield x.presentPaymentSheet();console.log("result: ",P),P&&P.paymentResult===t.SQ.Completed?o.updateWallet(o.splitAndJoin(_)):o.otherService.toast(o.text.payment_cancel)}catch{o.otherService.toast(o.text.payment_cancel)}})()}splitAndJoin(o){const i=o.split("_").slice(0,2).join("_");return console.log(i),i}payWithRazorpay(){var o=this;return(0,g.A)(function*(){RazorpayCheckout.open({description:"Pay Now",image:"https://cdn.iconscout.com/icon/free/png-512/bhim-3-69845.png",currency:"INR",key:o.setting.razor_key,amount:100*o.data.amount,name:o.user.name,prefill:{email:o.user.email,contact:o.user.phone},theme:{color:"#2196f3"},modal:{ondismiss:function(){alert("dismissed")}}},f=>{o.updateWallet(Date.now())},f=>{o.otherService.toast(o.text.payment_cancel)})})()}}return(n=d).\u0275fac=function(o){return new(o||n)(e.rXU(b.y8),e.rXU(F.G),e.rXU(k.Qq),e.rXU(j.Z))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-payment"]],decls:5,vars:2,consts:[[1,"ion-no-border"],["slot","end"],["color","medium",3,"click",4,"ngIf"],["class","ion-padding",4,"ngIf"],["color","medium",3,"click"],[1,"ion-padding"],["color","dark",2,"float","right","margin-top","5px"],["lines","none","detail","",3,"click",4,"ngIf"],["lines","none","detail","",3,"click"],["slot","start"],["src","assets/razor.png"],["name","crescent","slot","end",4,"ngIf"],["src","assets/stripe.png"],["name","crescent","slot","end"]],template:function(o,i){1&o&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.DNE(3,I,2,1,"ion-button",2),e.k0s()()(),e.DNE(4,r,25,6,"ion-content",3)),2&o&&(e.R7$(3),e.Y8G("ngIf",i.text),e.R7$(),e.Y8G("ngIf",i.data&&i.text))},dependencies:[l.bv,l.In,l.Jm,l.QW,l.W9,l.eU,l.uz,l.he,l.w2,l.Zx,l.ai,p.MD,p.bT,u.YN],styles:["ion-item[_ngcontent-%COMP%]{border-radius:5px;--min-height:60px;border:1px solid #f1f1f1}ion-toolbar[_ngcontent-%COMP%]{--background: white}ion-thumbnail[_ngcontent-%COMP%]{width:32px;height:32px}"]}),d})()},1328:(T,y,c)=>{c.r(y),c.d(y,{WalletPage:()=>S});var g=c(467),p=c(177),u=c(4341),l=c(4742),s=c(5704),t=c(4438),x=c(2068),v=c(9568);function R(r,m){if(1&r&&(t.j41(0,"ion-title"),t.EFF(1),t.k0s()),2&r){const n=t.XpG();t.R7$(),t.JRh(n.text.wallet_title)}}function C(r,m){1&r&&t.nrm(0,"ion-skeleton-text",12),2&r&&t.Y8G("animated",!0)}function e(r,m){if(1&r&&(t.j41(0,"div",6),t.nrm(1,"ion-skeleton-text",7),t.j41(2,"ion-row")(3,"ion-col",8),t.nrm(4,"ion-skeleton-text",9),t.k0s(),t.j41(5,"ion-col",8),t.nrm(6,"ion-skeleton-text",10),t.k0s()(),t.DNE(7,C,1,1,"ion-skeleton-text",11),t.k0s()),2&r){const n=t.XpG(2);t.R7$(),t.Y8G("animated",!0),t.R7$(3),t.Y8G("animated",!0),t.R7$(2),t.Y8G("animated",!0),t.R7$(),t.Y8G("ngForOf",n.fakeData)}}function b(r,m){1&r&&t.nrm(0,"ion-icon",28)}function F(r,m){1&r&&t.nrm(0,"ion-icon",29)}function k(r,m){if(1&r&&(t.j41(0,"ion-item",23)(1,"ion-label"),t.EFF(2),t.j41(3,"span",24),t.EFF(4),t.nI1(5,"date"),t.k0s(),t.j41(6,"small",25),t.EFF(7),t.k0s()(),t.DNE(8,b,1,0,"ion-icon",26)(9,F,1,0,"ion-icon",27),t.k0s()),2&r){const n=m.$implicit,d=t.XpG(4);t.R7$(2),t.Lme("",d.setting.currency,"",n.amount," "),t.R7$(2),t.JRh(t.i5U(5,6,n.created_at,"dd-MM-yyyy")),t.R7$(3),t.JRh(n.notes),t.R7$(),t.Y8G("ngIf",0==n.type),t.R7$(),t.Y8G("ngIf",1==n.type)}}function j(r,m){if(1&r&&(t.j41(0,"div"),t.DNE(1,k,10,9,"ion-item",22),t.k0s()),2&r){const n=t.XpG(3);t.R7$(),t.Y8G("ngForOf",n.data.trans)}}function I(r,m){if(1&r){const n=t.RV6();t.j41(0,"div")(1,"p"),t.EFF(2),t.k0s(),t.nrm(3,"br"),t.j41(4,"ion-input",30),t.mxI("ngModelChange",function(a){t.eBV(n);const o=t.XpG(3);return t.DH7(o.amount,a)||(o.amount=a),t.Njj(a)}),t.k0s(),t.nrm(5,"br"),t.j41(6,"ion-button",31),t.bIt("click",function(){t.eBV(n);const a=t.XpG(3);return t.Njj(a.add())}),t.EFF(7),t.k0s()()}if(2&r){const n=t.XpG(3);t.R7$(2),t.JRh(n.text.fund_desc),t.R7$(2),t.R50("ngModel",n.amount),t.R7$(3),t.JRh(n.text.add)}}function D(r,m){if(1&r){const n=t.RV6();t.j41(0,"div"),t.nrm(1,"br"),t.j41(2,"ion-item",13),t.nrm(3,"ion-icon",14),t.j41(4,"ion-label")(5,"span",15),t.EFF(6),t.k0s(),t.j41(7,"h3",16),t.EFF(8),t.k0s()()(),t.nrm(9,"br"),t.j41(10,"ion-segment",17),t.mxI("ngModelChange",function(a){t.eBV(n);const o=t.XpG(2);return t.DH7(o.type,a)||(o.type=a),t.Njj(a)}),t.j41(11,"ion-segment-button",18)(12,"ion-label"),t.EFF(13),t.k0s()(),t.j41(14,"ion-segment-button",19)(15,"ion-label"),t.EFF(16),t.k0s()()(),t.j41(17,"div",20),t.DNE(18,j,2,1,"div",21)(19,I,8,3,"div",21),t.k0s()()}if(2&r){const n=t.XpG(2);t.R7$(6),t.JRh(n.text.avil_balance),t.R7$(2),t.Lme("",n.setting.currency,"",n.data.wallet,""),t.R7$(2),t.R50("ngModel",n.type),t.R7$(),t.Y8G("value",1),t.R7$(2),t.JRh(n.text.trans),t.R7$(),t.Y8G("value",2),t.R7$(2),t.JRh(n.text.add_fund),t.R7$(),t.Y8G("ngSwitch",n.type),t.R7$(),t.Y8G("ngSwitchCase",1),t.R7$(),t.Y8G("ngSwitchCase",2)}}function M(r,m){if(1&r&&(t.j41(0,"ion-content")(1,"ion-grid",4),t.DNE(2,e,8,4,"div",5)(3,D,20,11,"div",2),t.k0s()()),2&r){const n=t.XpG();t.R7$(),t.Y8G("fixed",!0),t.R7$(),t.Y8G("ngIf",!n.data),t.R7$(),t.Y8G("ngIf",n.data)}}let S=(()=>{var r;class m{constructor(d,a,o){this.server=d,this.otherService=a,this.modalCtrl=o,this.type=1,this.fakeData=[1,2,3,4,5,6,7];const i=localStorage.getItem("admin_setting");null!==i&&(this.setting=JSON.parse(i));const _=localStorage.getItem("app_lang");null!==_&&(this.text=JSON.parse(_),this.text=this.text.text)}ngOnInit(){}ionViewDidEnter(){this.loadData()}loadData(d=0){var a=this;return(0,g.A)(function*(){a.server.getWallet(d).subscribe(o=>{a.data=o.data,console.log(a.data),a.amount=null})})()}add(){this.amount?this.openModel({amount:this.amount,stripe_key:this.data.stripe}):this.otherService.toast(this.text.enter_amount)}openModel(d){var a=this;return(0,g.A)(function*(){const o=yield a.modalCtrl.create({component:s.PaymentPage,animated:!0,mode:"ios",componentProps:{data:d}});return o.onDidDismiss().then(i=>{i.data?a.loadData():a.otherService.toast(a.text.payment_cancel)}),yield o.present()})()}}return(r=m).\u0275fac=function(d){return new(d||r)(t.rXU(x.Z),t.rXU(v.G),t.rXU(l.W3))},r.\u0275cmp=t.VBU({type:r,selectors:[["app-wallet"]],decls:6,vars:2,consts:[[1,"ion-no-border"],["color","dark"],[4,"ngIf"],["slot","start"],[3,"fixed"],["class","ion-padding",4,"ngIf"],[1,"ion-padding"],[1,"sek1",3,"animated"],["size","6"],[1,"sek2",3,"animated"],[1,"sek3",3,"animated"],["class","sek4",3,"animated",4,"ngFor","ngForOf"],[1,"sek4",3,"animated"],["lines","none","mode","md",1,"wallet"],["name","wallet","slot","start","color","light",2,"font-size","60px"],[1,"title"],[1,"wallet"],["value","1","color","dark","mode","md",3,"ngModelChange","ngModel"],[3,"value"],["color","dark",3,"value"],[1,"ion-padding","bottom",3,"ngSwitch"],[4,"ngSwitchCase"],["lines","full",4,"ngFor","ngForOf"],["lines","full"],[2,"float","right"],[1,"notes"],["name","add-outline","color","success","slot","start",4,"ngIf"],["name","remove-circle-outline","color","danger","slot","start",4,"ngIf"],["name","add-outline","color","success","slot","start"],["name","remove-circle-outline","color","danger","slot","start"],["label","Enter Amount","label-placement","floating","fill","outline","type","tel","maxlength","10","name","amount","mode","md",3,"ngModelChange","ngModel"],["mode","ios","expand","block","color","dark",3,"click"]],template:function(d,a){1&d&&(t.j41(0,"ion-header",0)(1,"ion-toolbar",1),t.DNE(2,R,2,1,"ion-title",2),t.j41(3,"ion-buttons",3),t.nrm(4,"ion-back-button"),t.k0s()()(),t.DNE(5,M,4,3,"ion-content",2)),2&d&&(t.R7$(2),t.Y8G("ngIf",a.text),t.R7$(3),t.Y8G("ngIf",a.text))},dependencies:[l.bv,l.Jm,l.QW,l.hU,l.W9,l.lO,l.eU,l.iq,l.$w,l.uz,l.he,l.ln,l.Gp,l.eP,l.ds,l.BC,l.ai,l.Je,l.Gw,l.el,p.MD,p.Sq,p.bT,p.ux,p.e1,p.vh,u.YN,u.BC,u.tU,u.vS],styles:[".wallet[_ngcontent-%COMP%]{--min-height: 100px;--padding-start: 20px;--padding-end: 20px;--background:var(--ion-color-dark);color:#fff;border-radius:10px;width:90%;margin:auto}ion-content[_ngcontent-%COMP%]{--background:var(--ion-color-light)}.bottom[_ngcontent-%COMP%]{background-color:#fff;width:90%;margin:20px auto auto;border-radius:10px}ion-segment[_ngcontent-%COMP%]{background-color:#fff;width:90%;margin:auto;border-radius:10px}.sek1[_ngcontent-%COMP%]{width:100%;height:100px;border-radius:10px}.sek2[_ngcontent-%COMP%], .sek3[_ngcontent-%COMP%]{width:100%;height:40px;border-radius:10px}.sek4[_ngcontent-%COMP%]{width:100%;height:50px;border-radius:10px;margin-top:20px}.wallet[_ngcontent-%COMP%]{margin-top:10px;font-size:28px;font-weight:600;color:#fff}.notes[_ngcontent-%COMP%]{display:block;margin-top:5px;color:gray}"]}),m})()}}]);