"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2068,5704],{3923:(v,f,l)=>{l.d(f,{$o:()=>r,_G:()=>_,Vq:()=>y,SQ:()=>c});var r=function(i){return i.Loaded="applePayLoaded",i.FailedToLoad="applePayFailedToLoad",i.Completed="applePayCompleted",i.Canceled="applePayCanceled",i.Failed="applePayFailed",i.DidSelectShippingContact="applePayDidSelectShippingContact",i.DidCreatePaymentMethod="applePayDidCreatePaymentMethod",i}(r||{}),_=function(i){return i.Loaded="googlePayLoaded",i.FailedToLoad="googlePayFailedToLoad",i.Completed="googlePayCompleted",i.Canceled="googlePayCanceled",i.Failed="googlePayFailed",i}(_||{}),y=function(i){return i.Loaded="paymentFlowLoaded",i.FailedToLoad="paymentFlowFailedToLoad",i.Opened="paymentFlowOpened",i.Created="paymentFlowCreated",i.Completed="paymentFlowCompleted",i.Canceled="paymentFlowCanceled",i.Failed="paymentFlowFailed",i}(y||{}),c=function(i){return i.Loaded="paymentSheetLoaded",i.FailedToLoad="paymentSheetFailedToLoad",i.Completed="paymentSheetCompleted",i.Canceled="paymentSheetCanceled",i.Failed="paymentSheetFailed",i}(c||{})},5704:(v,f,l)=>{l.r(f),l.d(f,{PaymentPage:()=>N});var r=l(467),_=l(177),y=l(4341),c=l(4742),i=l(5083),u=l(3923);const S=(0,i.F3)("Stripe",{web:()=>l.e(1651).then(l.bind(l,1651)).then(s=>new s.StripeWeb)});var T=l(1594),e=l(9350),t=l(4438),F=l(3656),P=l(9568),b=l(1626),x=l(2068);function k(s,h){if(1&s){const p=t.RV6();t.j41(0,"ion-button",4),t.bIt("click",function(){t.eBV(p);const n=t.XpG();return t.Njj(n.close())}),t.EFF(1),t.k0s()}if(2&s){const p=t.XpG();t.R7$(),t.JRh(p.text.cancel)}}function R(s,h){1&s&&t.nrm(0,"ion-spinner",13)}function j(s,h){if(1&s){const p=t.RV6();t.j41(0,"ion-item",8),t.bIt("click",function(){t.eBV(p);const n=t.XpG(2);return t.Njj(n.paymentSheet())}),t.j41(1,"ion-thumbnail",9),t.nrm(2,"img",12),t.k0s(),t.j41(3,"ion-label"),t.EFF(4),t.k0s(),t.DNE(5,R,1,0,"ion-spinner",11),t.k0s()}if(2&s){const p=t.XpG(2);t.R7$(4),t.JRh(p.text.credit),t.R7$(),t.Y8G("ngIf",1==p.payment_method)}}function D(s,h){1&s&&t.nrm(0,"ion-spinner",13)}function L(s,h){if(1&s){const p=t.RV6();t.j41(0,"ion-content",5)(1,"h3"),t.EFF(2),t.j41(3,"ion-badge",6),t.EFF(4),t.k0s()(),t.nrm(5,"br")(6,"br"),t.DNE(7,j,6,2,"ion-item",7),t.nrm(8,"br"),t.j41(9,"ion-item",8),t.bIt("click",function(){t.eBV(p);const n=t.XpG();return t.Njj(n.payWithRazorpay())}),t.j41(10,"ion-label"),t.EFF(11),t.k0s(),t.j41(12,"ion-thumbnail",9),t.nrm(13,"img",10),t.k0s(),t.DNE(14,D,1,0,"ion-spinner",11),t.k0s(),t.nrm(15,"br")(16,"br")(17,"br")(18,"br"),t.j41(19,"b"),t.EFF(20,"For stripe use these Test card detail : "),t.k0s(),t.j41(21,"p"),t.EFF(22,"Card No : 4242 4242 4242 4242"),t.k0s(),t.j41(23,"p"),t.EFF(24,"Exp. 12/25 CVV : 321"),t.k0s()()}if(2&s){const p=t.XpG();t.R7$(2),t.SpI("",p.text.select_payment_method," "),t.R7$(2),t.Lme("",p.setting.currency,"",p.data.amount,""),t.R7$(3),t.Y8G("ngIf",p.setting.stripe_key),t.R7$(4),t.SpI(" ",p.text.upi,""),t.R7$(3),t.Y8G("ngIf",2==p.payment_method)}}let N=(()=>{var s;class h{constructor(o,n,d,g){this.navParams=o,this.otherService=n,this.http=d,this.server=g,this.data=o.get("data");const m=localStorage.getItem("admin_setting"),I=localStorage.getItem("user_data");null!==m&&(this.setting=JSON.parse(m)),null!==I&&(this.user=JSON.parse(I));const C=localStorage.getItem("app_lang");null!==C&&(this.text=JSON.parse(C),this.text=this.text.text),S.initialize({publishableKey:this.data.stripe_key}),this.meta={counsumer_id:778383,consumer_mac:"sdjksfhsd887f8s"},this.customizations={title:"Wallet Recharge",description:"Wallet Recharge",logo:"https://dicont.s3.amazonaws.com/static/flow-logos/flutterwave-logo.png"},this.customerDetails={name:this.user.name,email:this.user.email,phone_number:this.user.phone}}ngOnInit(){}updateWallet(o=null){var n=this;return(0,r.A)(function*(){const d={amount:n.data.amount,user_id:localStorage.getItem("user_id"),trans_id:o,payment_method:n.payment_method,notes:"Wallet Recharge"};n.server.updateWallet(d).subscribe(g=>{n.payment_method=null,n.otherService.toast(n.text.payment_added),n.close(o)})})()}close(o=null){var n=this;return(0,r.A)(function*(){n.otherService.closeModel(o)})()}httpPost(){const o={user:localStorage.getItem("user_id"),total:this.data.amount};return this.http.post(this.server.getApiUrl()+"stripePayment",o).pipe((0,T.$)())}paymentSheet(){var o=this;return(0,r.A)(function*(){o.payment_method=1;try{S.addListener(u.SQ.Completed,()=>{console.log("PaymentSheetEventsEnum.Completed")});const n=o.httpPost();console.log(n);const{paymentIntent:d,ephemeralKey:g,customer:m}=yield function a(s,h){const p="object"==typeof h;return new Promise((o,n)=>{let g,d=!1;s.subscribe({next:m=>{g=m,d=!0},error:n,complete:()=>{d?o(g):p?o(h.defaultValue):n(new e.G)}})})}(n);yield S.createPaymentSheet({paymentIntentClientSecret:d,customerId:m,customerEphemeralKeySecret:g,merchantDisplayName:o.setting.app_name});const I=yield S.presentPaymentSheet();console.log("result: ",I),I&&I.paymentResult===u.SQ.Completed?o.updateWallet(o.splitAndJoin(d)):o.otherService.toast(o.text.payment_cancel)}catch{o.otherService.toast(o.text.payment_cancel)}})()}splitAndJoin(o){const n=o.split("_").slice(0,2).join("_");return console.log(n),n}payWithRazorpay(){var o=this;return(0,r.A)(function*(){RazorpayCheckout.open({description:"Pay Now",image:"https://cdn.iconscout.com/icon/free/png-512/bhim-3-69845.png",currency:"INR",key:o.setting.razor_key,amount:100*o.data.amount,name:o.user.name,prefill:{email:o.user.email,contact:o.user.phone},theme:{color:"#2196f3"},modal:{ondismiss:function(){alert("dismissed")}}},m=>{o.updateWallet(Date.now())},m=>{o.otherService.toast(o.text.payment_cancel)})})()}}return(s=h).\u0275fac=function(o){return new(o||s)(t.rXU(F.y8),t.rXU(P.G),t.rXU(b.Qq),t.rXU(x.Z))},s.\u0275cmp=t.VBU({type:s,selectors:[["app-payment"]],decls:5,vars:2,consts:[[1,"ion-no-border"],["slot","end"],["color","medium",3,"click",4,"ngIf"],["class","ion-padding",4,"ngIf"],["color","medium",3,"click"],[1,"ion-padding"],["color","dark",2,"float","right","margin-top","5px"],["lines","none","detail","",3,"click",4,"ngIf"],["lines","none","detail","",3,"click"],["slot","start"],["src","assets/razor.png"],["name","crescent","slot","end",4,"ngIf"],["src","assets/stripe.png"],["name","crescent","slot","end"]],template:function(o,n){1&o&&(t.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),t.DNE(3,k,2,1,"ion-button",2),t.k0s()()(),t.DNE(4,L,25,6,"ion-content",3)),2&o&&(t.R7$(3),t.Y8G("ngIf",n.text),t.R7$(),t.Y8G("ngIf",n.data&&n.text))},dependencies:[c.bv,c.In,c.Jm,c.QW,c.W9,c.eU,c.uz,c.he,c.w2,c.Zx,c.ai,_.MD,_.bT,y.YN],styles:["ion-item[_ngcontent-%COMP%]{border-radius:5px;--min-height:60px;border:1px solid #f1f1f1}ion-toolbar[_ngcontent-%COMP%]{--background: white}ion-thumbnail[_ngcontent-%COMP%]{width:32px;height:32px}"]}),h})()},2068:(v,f,l)=>{l.d(f,{Z:()=>i});var r=l(6354);var y=l(4438),c=l(1626);let i=(()=>{var u;class S{constructor(e){this.http=e,this.url="http://ec2-13-203-97-31.ap-south-1.compute.amazonaws.com/dashboard/api/"}welcome(){return this.http.get(this.url+"welcome").pipe((0,r.T)(e=>e))}homepage(){return this.http.get(this.url+"homepage?lat="+localStorage.getItem("current_lat")+"&lng="+localStorage.getItem("current_lng")+"&cart_no="+localStorage.getItem("cart_no")+"&lid="+localStorage.getItem("lang_id")).pipe((0,r.T)(e=>e))}view(e){return this.http.get(this.url+"view?lat="+localStorage.getItem("current_lat")+"&lng="+localStorage.getItem("current_lng")+"&type="+e+"&lid="+localStorage.getItem("lang_id")).pipe((0,r.T)(a=>a))}item(e){return this.http.get(this.url+"getItem?store_id="+e+"&cart_no="+localStorage.getItem("cart_no")+"&lid="+localStorage.getItem("lang_id")).pipe((0,r.T)(a=>a))}add_to_cart(e){return this.http.post(this.url+"add_to_cart",e).pipe((0,r.T)(a=>a))}getCart(e=0){return this.http.get(this.url+"getCart?cart_no="+localStorage.getItem("cart_no")+"&cart_remove_id="+e+"&lid="+localStorage.getItem("lang_id")).pipe((0,r.T)(a=>a))}signup(e){return this.http.post(this.url+"signup",e).pipe((0,r.T)(a=>a))}login(e){return this.http.post(this.url+"login",e).pipe((0,r.T)(a=>a))}resendCode(e){return this.http.get(this.url+"resendCode?id="+e).pipe((0,r.T)(a=>a))}verifyOtp(e,a){return this.http.post(this.url+"verifyOtp?id="+a,e).pipe((0,r.T)(t=>t))}forgot(e){return this.http.post(this.url+"forgot",e).pipe((0,r.T)(a=>a))}resetPassword(e,a){return this.http.post(this.url+"resetPassword?id="+a,e).pipe((0,r.T)(t=>t))}checkoutData(){return this.http.get(this.url+"checkoutData?user_id="+localStorage.getItem("user_id")+"&cart_no="+localStorage.getItem("cart_no")+"&lid="+localStorage.getItem("lang_id")).pipe((0,r.T)(e=>e))}saveAddress(e){return this.http.post(this.url+"saveAddress",e).pipe((0,r.T)(a=>a))}getAddress(){return this.http.get(this.url+"getAddress?user_id="+localStorage.getItem("user_id")+"&lid="+localStorage.getItem("lang_id")).pipe((0,r.T)(e=>e))}getAmount(e){return this.http.post(this.url+"getAmount",e).pipe((0,r.T)(a=>a))}updateDays(e){return this.http.post(this.url+"updateDays?cart_no="+localStorage.getItem("cart_no"),e).pipe((0,r.T)(a=>a))}placeOrder(e){return this.http.post(this.url+"placeOrder",e).pipe((0,r.T)(a=>a))}updateWallet(e){return this.http.post(this.url+"updateWallet",e).pipe((0,r.T)(a=>a))}getWallet(e=0){return this.http.get(this.url+"getWallet?user_id="+localStorage.getItem("user_id")+"&amount="+e+"&lid="+localStorage.getItem("lang_id")).pipe((0,r.T)(a=>a))}subscription(){return this.http.get(this.url+"subscription?user_id="+localStorage.getItem("user_id")+"&lid="+localStorage.getItem("lang_id")).pipe((0,r.T)(e=>e))}mark(e){return this.http.post(this.url+"mark",e).pipe((0,r.T)(a=>a))}undo(e){return this.http.get(this.url+"undo?id="+e).pipe((0,r.T)(a=>a))}account(){return this.http.get(this.url+"account?user_id="+localStorage.getItem("user_id")+"&lid="+localStorage.getItem("lang_id")).pipe((0,r.T)(e=>e))}deleteAccount(){return this.http.get(this.url+"deleteAccount?user_id="+localStorage.getItem("user_id")+"&lid="+localStorage.getItem("lang_id")).pipe((0,r.T)(e=>e))}deleteAddress(e){return this.http.get(this.url+"deleteAddress?user_id="+localStorage.getItem("user_id")+"&id="+e+"&lid="+localStorage.getItem("lang_id")).pipe((0,r.T)(a=>a))}updateData(e){return this.http.post(this.url+"updateData?user_id="+localStorage.getItem("user_id"),e).pipe((0,r.T)(a=>a))}stop(e){return this.http.get(this.url+"stop?user_id="+localStorage.getItem("user_id")+"&detail_id="+e+"&lid="+localStorage.getItem("lang_id")).pipe((0,r.T)(a=>a))}customCart(e){return this.http.post(this.url+"customCart",e).pipe((0,r.T)(a=>a))}review(e){return this.http.post(this.url+"review",e).pipe((0,r.T)(a=>a))}search(e){return this.http.get(this.url+"search?q="+e+"&lid="+localStorage.getItem("lang_id")).pipe((0,r.T)(a=>a))}language(){return this.http.get(this.url+"language").pipe((0,r.T)(e=>e))}page(){return this.http.get(this.url+"page?lid="+localStorage.getItem("lang_id")).pipe((0,r.T)(e=>e))}contact(e){return this.http.post(this.url+"contact",e).pipe((0,r.T)(a=>a))}getApiUrl(){return this.url}}return(u=S).\u0275fac=function(e){return new(e||u)(y.KVO(c.Qq))},u.\u0275prov=y.jDH({token:u,factory:u.\u0275fac,providedIn:"root"}),S})()}}]);