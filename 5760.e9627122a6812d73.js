"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5760,7564],{7762:(D,h,r)=>{r.d(h,{L:()=>u});const u=(0,r(5083).F3)("Geolocation",{web:()=>r.e(2920).then(r.bind(r,2920)).then(m=>new m.GeolocationWeb)})},7564:(D,h,r)=>{r.r(h),r.d(h,{AddressPage:()=>a});var c=r(467),u=r(177),m=r(4341),i=r(4742),v=r(7762),e=r(4438),f=r(3656),O=r(9568),g=r(1208),E=r(2068);const p=["map"];function R(l,s){if(1&l){const n=e.RV6();e.j41(0,"ion-button",12),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.close())}),e.EFF(1),e.k0s()}if(2&l){const n=e.XpG();e.R7$(),e.JRh(n.text.cancel)}}function M(l,s){if(1&l){const n=e.RV6();e.j41(0,"ion-item",17),e.bIt("click",function(){const o=e.eBV(n).$implicit,d=e.XpG(2);return e.Njj(d.close(o))}),e.j41(1,"ion-label"),e.EFF(2),e.j41(3,"small",18),e.EFF(4),e.k0s()()()}if(2&l){const n=s.$implicit;e.R7$(2),e.JRh(n.type),e.R7$(2),e.JRh(n.address)}}function k(l,s){if(1&l&&(e.j41(0,"ion-accordion-group")(1,"ion-accordion",13)(2,"ion-item",14)(3,"ion-label"),e.EFF(4),e.k0s()(),e.j41(5,"div",15),e.DNE(6,M,5,2,"ion-item",16),e.k0s()()()),2&l){const n=e.XpG();e.R7$(4),e.JRh(n.text.saved_address),e.R7$(2),e.Y8G("ngForOf",n.data)}}function P(l,s){if(1&l){const n=e.RV6();e.j41(0,"ion-button",19),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.saveAddress())}),e.EFF(1),e.k0s()}if(2&l){const n=e.XpG();e.R7$(),e.JRh(n.text.save_address)}}function b(l,s){1&l&&(e.j41(0,"ion-button",20),e.nrm(1,"ion-spinner",21),e.k0s())}let a=(()=>{var l;class s{constructor(t,o,d,_,A,y,I){this.navParams=t,this.platform=o,this.zone=d,this.otherService=_,this.mapService=A,this.server=y,this.alertCtrl=I,this.type="Home",this.autocompleteItems=[],this.show=!0,this.hasClick=!1,this.data=t.get("data"),this.store_id=t.get("store_id");const C=localStorage.getItem("app_lang");null!==C&&(this.text=JSON.parse(C),this.text=this.text.text)}ngOnInit(){this.getCurrentLocation()}requestLocationPermission(){var t=this;return(0,c.A)(function*(){try{"granted"===(yield v.L.requestPermissions()).location?t.getCurrentLocation():t.showAlert("Permission Denied","Please allow location access in your app or browser settings.")}catch(o){t.showAlert("Error","Unable to request location permission."),console.error("Permission request error",o)}})()}getCurrentLocation(){var t=this;return(0,c.A)(function*(){try{const o=yield v.L.getCurrentPosition();t.latitude=o.coords.latitude,t.longitude=o.coords.longitude,console.log("Latitude:",t.latitude,"Longitude:",t.longitude)}catch(o){1===o.code?t.showAlert("Location Permission Denied","Please allow location access in your app or browser settings."):t.showAlert("Error","Failed to get your location."),console.error("Error getting location",o)}})()}showAlert(t,o){var d=this;return(0,c.A)(function*(){d.otherService.confirmPernissions(t,o).then(_=>{d.close()})})()}setType(t){this.type=t}ionViewDidEnter(){var t=this;return(0,c.A)(function*(){t.platform.ready().then(()=>{t.loadMap()})})()}close(t=[]){var o=this;return(0,c.A)(function*(){o.otherService.closeModel(t)})()}loadMap(){var t=this;return(0,c.A)(function*(){t.map=null,t.show=!0;let o=yield t.mapService.getMap();t.map=yield new google.maps.Map(t.mapElement.nativeElement,o),t.show=!1,t.map.addListener("tilesloaded",(0,c.A)(function*(){t.lat=t.map.center.lat(),t.lng=t.map.center.lng()}))})()}UpdateSearchResults(){this.GoogleAutocomplete.getPlacePredictions({input:this.autocomplete},(t,o)=>{this.autocompleteItems=[],this.zone.run(()=>{t.forEach(d=>{this.autocompleteItems.push(d)})})})}SelectSearchResult(t){const o=new google.maps.Geocoder;new google.maps.InfoWindow,this.placeid=t.place_id,o.geocode({placeId:this.placeid},(_,A)=>{"OK"===A?_[0]?(this.map.setZoom(16),this.map.setCenter(_[0].geometry.location)):window.alert("No results found"):window.alert("Geocoder failed due to: "+A)}),this.ClearAutocomplete()}ClearAutocomplete(){this.autocompleteItems=[],this.autocomplete=""}saveAddress(){var t=this;return(0,c.A)(function*(){if(t.lat=t.latitude,t.lng=t.longitude,!t.address||t.address.length<4||!t.lat||!t.lng)return t.otherService.toast(t.text.correct_detail);let o={type:t.type,address:t.address,floor:t.floor,landmark:t.landmark,lat:t.latitude,lng:t.longitude,user_id:localStorage.getItem("user_id"),store_id:t.store_id};t.hasClick=!0,t.server.saveAddress(o).subscribe(d=>{t.hasClick=!1,t.close(d.latest)})})()}}return(l=s).\u0275fac=function(t){return new(t||l)(e.rXU(f.y8),e.rXU(f.OD),e.rXU(e.SKi),e.rXU(O.G),e.rXU(g.u),e.rXU(E.Z),e.rXU(i.hG))},l.\u0275cmp=e.VBU({type:l,selectors:[["app-address"]],viewQuery:function(t,o){if(1&t&&e.GBs(p,5),2&t){let d;e.mGM(d=e.lsd())&&(o.mapElement=d.first)}},decls:31,vars:23,consts:[[1,"ion-no-border"],["slot","end"],["color","medium",3,"click",4,"ngIf"],[1,"ion-padding"],[4,"ngIf"],[2,"font-weight","bold"],["size","4",3,"click"],["name","address","label-placement","floating","fill","outline","mode","md",3,"ngModelChange","label","ngModel","disabled"],["name","floor","label-placement","floating","fill","outline","mode","md",3,"ngModelChange","label","ngModel","disabled"],["name","landmark","label-placement","floating","fill","outline","mode","md",3,"ngModelChange","label","ngModel","disabled"],["mode","ios","expand","block","color","dark","type","submit",3,"click",4,"ngIf"],["mode","ios","expand","block","color","dark","type","button",4,"ngIf"],["color","medium",3,"click"],["value","first"],["slot","header","color","light",1,"h"],["slot","content",1,"ion-padding"],["style","cursor: pointer;",3,"click",4,"ngFor","ngForOf"],[2,"cursor","pointer",3,"click"],[2,"color","gray","margin-top","5px","display","block"],["mode","ios","expand","block","color","dark","type","submit",3,"click"],["mode","ios","expand","block","color","dark","type","button"],["name","crescent"]],template:function(t,o){1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.DNE(3,R,2,1,"ion-button",2),e.k0s()()(),e.j41(4,"ion-content")(5,"div",3),e.DNE(6,k,7,2,"ion-accordion-group",4),e.j41(7,"p",5),e.EFF(8),e.k0s(),e.nrm(9,"br"),e.j41(10,"ion-row")(11,"ion-col",6),e.bIt("click",function(){return o.setType("Home")}),e.j41(12,"span"),e.EFF(13),e.k0s()(),e.j41(14,"ion-col",6),e.bIt("click",function(){return o.setType("Office")}),e.j41(15,"span"),e.EFF(16),e.k0s()(),e.j41(17,"ion-col",6),e.bIt("click",function(){return o.setType("Other")}),e.j41(18,"span"),e.EFF(19),e.k0s()()(),e.nrm(20,"br")(21,"br"),e.j41(22,"ion-input",7),e.mxI("ngModelChange",function(_){return e.DH7(o.address,_)||(o.address=_),_}),e.k0s(),e.nrm(23,"br"),e.j41(24,"ion-input",8),e.mxI("ngModelChange",function(_){return e.DH7(o.floor,_)||(o.floor=_),_}),e.k0s(),e.nrm(25,"br"),e.j41(26,"ion-input",9),e.mxI("ngModelChange",function(_){return e.DH7(o.landmark,_)||(o.landmark=_),_}),e.k0s(),e.nrm(27,"br")(28,"br"),e.DNE(29,P,2,1,"ion-button",10)(30,b,2,0,"ion-button",11),e.k0s()()),2&t&&(e.R7$(3),e.Y8G("ngIf",o.text),e.R7$(3),e.Y8G("ngIf",o.data&&o.data.length>0),e.R7$(2),e.JRh(o.text.add_new_address),e.R7$(4),e.HbH("Home"==o.type?"typeSelected":"type"),e.R7$(),e.JRh(o.text.home),e.R7$(2),e.HbH("Office"==o.type?"typeSelected":"type"),e.R7$(),e.JRh(o.text.office),e.R7$(2),e.HbH("Other"==o.type?"typeSelected":"type"),e.R7$(),e.JRh(o.text.other),e.R7$(3),e.FS9("label",o.text.com_address),e.R50("ngModel",o.address),e.Y8G("disabled",o.hasClick),e.R7$(2),e.FS9("label",o.text.floor),e.R50("ngModel",o.floor),e.Y8G("disabled",o.hasClick),e.R7$(2),e.FS9("label",o.text.landmark),e.R50("ngModel",o.landmark),e.Y8G("disabled",o.hasClick),e.R7$(3),e.Y8G("ngIf",!o.hasClick),e.R7$(),e.Y8G("ngIf",o.hasClick))},dependencies:[i.bv,i.xk,i.YH,i.Jm,i.QW,i.hU,i.W9,i.eU,i.$w,i.uz,i.he,i.ln,i.w2,i.ai,i.Gw,u.MD,u.Sq,u.bT,m.YN,m.BC,m.vS],styles:["ion-row[_ngcontent-%COMP%]{text-align:center}ion-toolbar[_ngcontent-%COMP%]{--background: white}.type[_ngcontent-%COMP%]{background-color:var(--ion-color-light);padding:10px 15px;border-radius:5px}.typeSelected[_ngcontent-%COMP%]{background-color:var(--ion-color-dark);color:#fff;padding:10px 15px;border-radius:5px}#map[_ngcontent-%COMP%]{width:100%;height:45vh}.map-wrapper[_ngcontent-%COMP%]{position:relative}.map-wrapper[_ngcontent-%COMP%]   #map_center[_ngcontent-%COMP%]{position:absolute;z-index:99;height:40px;width:40px;top:50%;left:50%;margin-left:-21px;margin-top:-41px}.h[_ngcontent-%COMP%]{--min-height:10px !important}ion-accordion[_ngcontent-%COMP%]{border-radius:10px;margin-bottom:40px}"]}),s})()},5760:(D,h,r)=>{r.r(h),r.d(h,{BookPage:()=>b});var c=r(467),u=r(177),m=r(4341),i=r(4742),v=r(7564),e=r(4438),f=r(2068),O=r(9568);function g(a,l){if(1&a&&(e.j41(0,"ion-title"),e.EFF(1),e.k0s()),2&a){const s=e.XpG();e.R7$(),e.JRh(s.text.address_book)}}function E(a,l){1&a&&e.nrm(0,"ion-skeleton-text",9),2&a&&e.Y8G("animated",!0)}function p(a,l){if(1&a&&(e.j41(0,"div"),e.DNE(1,E,1,1,"ion-skeleton-text",8),e.k0s()),2&a){const s=e.XpG(2);e.R7$(),e.Y8G("ngForOf",s.fakeData)}}function R(a,l){if(1&a&&(e.j41(0,"div",10)(1,"p",11),e.EFF(2),e.k0s()()),2&a){const s=e.XpG(2);e.R7$(2),e.JRh(s.text.no_address)}}function M(a,l){if(1&a){const s=e.RV6();e.j41(0,"ion-col",13)(1,"ion-card",14)(2,"ion-card-header")(3,"ion-card-subtitle"),e.EFF(4),e.k0s()(),e.j41(5,"ion-card-content"),e.EFF(6),e.k0s(),e.j41(7,"ion-button",15),e.bIt("click",function(){const t=e.eBV(s).$implicit,o=e.XpG(3);return e.Njj(o.deleteAddress(t.id))}),e.nrm(8,"ion-icon",16),e.EFF(9),e.k0s()()()}if(2&a){const s=l.$implicit,n=e.XpG(3);e.Y8G("size",n.isMobile?12:6),e.R7$(4),e.JRh(s.type),e.R7$(2),e.E5c(" ",s.address," ",s.floor," ",s.landmark," "),e.R7$(3),e.SpI(" \xa0",n.text.remove,"")}}function k(a,l){if(1&a&&(e.j41(0,"div")(1,"ion-row"),e.DNE(2,M,10,6,"ion-col",12),e.k0s()()),2&a){const s=e.XpG(2);e.R7$(2),e.Y8G("ngForOf",s.data)}}function P(a,l){if(1&a&&(e.j41(0,"ion-content",5)(1,"ion-grid",6),e.DNE(2,p,2,1,"div",3)(3,R,3,1,"div",7)(4,k,3,1,"div",3),e.k0s()()),2&a){const s=e.XpG();e.R7$(),e.Y8G("fixed",!0),e.R7$(),e.Y8G("ngIf",!s.data),e.R7$(),e.Y8G("ngIf",s.data&&0==s.data.length),e.R7$(),e.Y8G("ngIf",s.data&&s.data.length>0)}}let b=(()=>{var a;class l{constructor(n,t,o){this.server=n,this.otherService=t,this.modalCtrl=o,this.fakeData=[1,2,3,4,6],this.isMobile=!1;const d=localStorage.getItem("app_lang");null!==d&&(this.text=JSON.parse(d),this.text=this.text.text),this.checkScreenSize()}onResize(n){this.checkScreenSize()}checkScreenSize(){this.isMobile=window.innerWidth<=768}ngOnInit(){}ionViewDidEnter(){this.loadData()}loadData(){var n=this;return(0,c.A)(function*(){n.server.getAddress().subscribe(t=>{n.data=t.data})})()}deleteAddress(n){var t=this;return(0,c.A)(function*(){t.otherService.confirm().then(o=>{"ok"===o&&(t.otherService.showLoading(),t.server.deleteAddress(n).subscribe(d=>{t.data=d.data,t.otherService.hideLoading(),t.otherService.toast(t.text.address_removed)}))})})()}addNew(){var n=this;return(0,c.A)(function*(){const t=yield n.modalCtrl.create({component:v.AddressPage,animated:!0,mode:"ios",componentProps:{addnew:!0}});return t.onDidDismiss().then(o=>{console.log(o.data),o.data.all&&(n.data=o.data.all)}),yield t.present()})()}}return(a=l).\u0275fac=function(n){return new(n||a)(e.rXU(f.Z),e.rXU(O.G),e.rXU(i.W3))},a.\u0275cmp=e.VBU({type:a,selectors:[["app-book"]],hostBindings:function(n,t){1&n&&e.bIt("resize",function(d){return t.onResize(d)},!1,e.tSv)},decls:6,vars:2,consts:[[1,"ion-no-border"],["color","dark"],["slot","start"],[4,"ngIf"],["class","ion-padding",4,"ngIf"],[1,"ion-padding"],[3,"fixed"],["style","margin-top: 30%;",4,"ngIf"],["class","sek1",3,"animated",4,"ngFor","ngForOf"],[1,"sek1",3,"animated"],[2,"margin-top","30%"],["align","center"],[3,"size",4,"ngFor","ngForOf"],[3,"size"],["mode","ios"],["fill","clear","color","danger",3,"click"],["name","trash-outline"]],template:function(n,t){1&n&&(e.j41(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),e.nrm(3,"ion-back-button"),e.k0s(),e.DNE(4,g,2,1,"ion-title",3),e.k0s()(),e.DNE(5,P,5,4,"ion-content",4)),2&n&&(e.R7$(4),e.Y8G("ngIf",t.text),e.R7$(),e.Y8G("ngIf",t.text))},dependencies:[i.bv,i.Jm,i.QW,i.b_,i.I9,i.ME,i.HW,i.hU,i.W9,i.lO,i.eU,i.iq,i.ln,i.ds,i.BC,i.ai,i.el,u.MD,u.Sq,u.bT,m.YN],styles:["ion-content[_ngcontent-%COMP%]{--background:var(--ion-color-light)}ion-item[_ngcontent-%COMP%]{border-radius:10px;margin-top:10px}ion-card[_ngcontent-%COMP%]{width:98%;margin:20px auto auto}.sek1[_ngcontent-%COMP%]{width:96%;height:70px;border-radius:10px;margin-left:2%;margin-top:8%}"]}),l})()},1208:(D,h,r)=>{r.d(h,{u:()=>v});var c=r(467),u=r(7762),m=r(4438),i=r(3158);let v=(()=>{var e;class f{constructor(g){this.nativeGeocoder=g}getLocation(){const g=u.L.getCurrentPosition();return console.log("data ",g),g}getMap(){return(0,c.A)(function*(){const g=yield u.L.getCurrentPosition();return{center:yield new google.maps.LatLng(g.coords.latitude,g.coords.longitude),zoom:16,mapTypeId:google.maps.MapTypeId.ROADMAP}})()}getAddress(g,E){var p=this;return(0,c.A)(function*(){return yield p.nativeGeocoder.reverseGeocode(g,E,{useLocale:!0,maxResults:5}).then(function(){var M=(0,c.A)(function*(k){p.address="";let P=[];for(let[b,a]of Object.entries(k[0]))a.length>0&&P.push(a);P.reverse();for(let b of P)p.address+=b+", ";p.address=p.address.slice(0,-2)});return function(k){return M.apply(this,arguments)}}()).catch(M=>{}),console.log("Address  "+p.address),p.address})()}}return(e=f).\u0275fac=function(g){return new(g||e)(m.KVO(i.K))},e.\u0275prov=m.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),f})()}}]);