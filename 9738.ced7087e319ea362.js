"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5704,5864,9738],{3923:(B,y,r)=>{r.d(y,{$o:()=>x,_G:()=>P,Vq:()=>F,SQ:()=>s});var x=function(e){return e.Loaded="applePayLoaded",e.FailedToLoad="applePayFailedToLoad",e.Completed="applePayCompleted",e.Canceled="applePayCanceled",e.Failed="applePayFailed",e.DidSelectShippingContact="applePayDidSelectShippingContact",e.DidCreatePaymentMethod="applePayDidCreatePaymentMethod",e}(x||{}),P=function(e){return e.Loaded="googlePayLoaded",e.FailedToLoad="googlePayFailedToLoad",e.Completed="googlePayCompleted",e.Canceled="googlePayCanceled",e.Failed="googlePayFailed",e}(P||{}),F=function(e){return e.Loaded="paymentFlowLoaded",e.FailedToLoad="paymentFlowFailedToLoad",e.Opened="paymentFlowOpened",e.Created="paymentFlowCreated",e.Completed="paymentFlowCompleted",e.Canceled="paymentFlowCanceled",e.Failed="paymentFlowFailed",e}(F||{}),s=function(e){return e.Loaded="paymentSheetLoaded",e.FailedToLoad="paymentSheetFailedToLoad",e.Completed="paymentSheetCompleted",e.Canceled="paymentSheetCanceled",e.Failed="paymentSheetFailed",e}(s||{})},9738:(B,y,r)=>{r.r(y),r.d(y,{CheckoutPage:()=>z});var x=r(467),P=r(177),F=r(4341),s=r(4742),e=r(4531),E=r(7564),j=r(5704),T=r(5864),t=r(4438),G=r(2068),o=r(9568);const M=()=>[0,1];function $(a,u){if(1&a&&(t.j41(0,"ion-title"),t.EFF(1),t.k0s()),2&a){const n=t.XpG();t.R7$(),t.JRh(n.text.checkout_title)}}function S(a,u){1&a&&t.nrm(0,"ion-skeleton-text",11),2&a&&t.Y8G("animated",!0)}function N(a,u){if(1&a&&(t.j41(0,"div"),t.DNE(1,S,1,1,"ion-skeleton-text",10),t.k0s()),2&a){const n=t.XpG(2);t.R7$(),t.Y8G("ngForOf",n.fakeData)}}function X(a,u){1&a&&(t.j41(0,"ion-col",26),t.nrm(1,"img",27),t.k0s())}function m(a,u){if(1&a&&(t.j41(0,"small",28),t.EFF(1),t.k0s()),2&a){const n=t.XpG(3);t.R7$(),t.JRh(n.address.address)}}function v(a,u){if(1&a&&(t.j41(0,"ion-select-option",29),t.EFF(1),t.k0s()),2&a){const n=u.$implicit;t.Y8G("value",n.id),t.R7$(),t.JRh(n.title)}}function _(a,u){if(1&a&&(t.j41(0,"ion-select-option",29),t.EFF(1),t.k0s()),2&a){const n=u.$implicit;t.Y8G("value",n),t.R7$(),t.JRh(n)}}function h(a,u){if(1&a&&(t.j41(0,"ion-row")(1,"ion-col",33),t.EFF(2),t.k0s(),t.j41(3,"ion-col",34),t.EFF(4),t.k0s(),t.j41(5,"ion-col",35),t.EFF(6),t.k0s(),t.j41(7,"ion-col",35),t.EFF(8),t.k0s()()),2&a){const n=u.$implicit,i=t.XpG(4);t.R7$(2),t.Lme("",n.item," - ",n.type,""),t.R7$(2),t.LHq("",i.text.start," : ",n.start," | ",i.text.valid," : ",n.end,""),t.R7$(2),t.Lme("",i.text.total_day_count," : ",n.dayCount,""),t.R7$(2),t.ZXR("",i.text.amount," : ",n.currency,"",n.price," x ",n.dayCount," = ",n.currency,"",n.total_price,"")}}function k(a,u){if(1&a&&(t.j41(0,"h3"),t.EFF(1),t.k0s()),2&a){const n=t.XpG(4);t.R7$(),t.E5c("",n.text.payable_amount," : ",n.cal.currency,"",n.cal.total,"")}}function p(a,u){if(1&a&&(t.j41(0,"h3",36),t.EFF(1),t.j41(2,"s"),t.EFF(3),t.k0s(),t.EFF(4),t.k0s()),2&a){const n=t.XpG(4);t.R7$(),t.SpI("",n.text.payable_amount," : "),t.R7$(2),t.Lme("",n.cal.currency,"",n.cal.total,""),t.R7$(),t.Lme(" ",n.cal.currency,"",n.total,"")}}function C(a,u){if(1&a&&(t.j41(0,"div",30),t.DNE(1,h,9,14,"ion-row",31)(2,k,2,3,"h3",2)(3,p,5,5,"h3",32),t.k0s()),2&a){const n=t.XpG(3);t.R7$(),t.Y8G("ngForOf",n.cal.summery),t.R7$(),t.Y8G("ngIf",!n.save),t.R7$(),t.Y8G("ngIf",n.save)}}function f(a,u){if(1&a&&(t.j41(0,"small",39),t.EFF(1),t.k0s()),2&a){const n=t.XpG(4);t.R7$(),t.E5c("",n.text.you_save," ",n.cal.currency,"",n.save,"")}}function l(a,u){if(1&a){const n=t.RV6();t.j41(0,"ion-item",14),t.bIt("click",function(){t.eBV(n);const c=t.XpG(3);return t.Njj(c.getOffer())}),t.j41(1,"label"),t.EFF(2),t.DNE(3,f,2,3,"small",37),t.k0s(),t.nrm(4,"ion-icon",38),t.k0s()}if(2&a){const n=t.XpG(3);t.R7$(2),t.SpI("",n.text.discount_offers," "),t.R7$(),t.Y8G("ngIf",n.save)}}function d(a,u){if(1&a){const n=t.RV6();t.j41(0,"ion-button",40),t.bIt("click",function(){t.eBV(n);const c=t.XpG(3);return t.Njj(c.placeOrder())}),t.EFF(1),t.k0s()}if(2&a){const n=t.XpG(3);t.R7$(),t.JRh(n.text.checkout_button)}}function b(a,u){if(1&a){const n=t.RV6();t.j41(0,"div")(1,"ion-row"),t.DNE(2,X,2,0,"ion-col",12),t.j41(3,"ion-col",13)(4,"ion-item",14),t.bIt("click",function(){t.eBV(n);const c=t.XpG(2);return t.Njj(c.getAddress())}),t.j41(5,"label"),t.EFF(6),t.DNE(7,m,2,1,"small",15),t.k0s(),t.nrm(8,"ion-icon",16),t.k0s(),t.nrm(9,"br"),t.j41(10,"p",17),t.EFF(11),t.k0s(),t.j41(12,"ion-item",18)(13,"ion-select",19),t.mxI("ngModelChange",function(c){t.eBV(n);const g=t.XpG(2);return t.DH7(g.sub_time,c)||(g.sub_time=c),t.Njj(c)}),t.bIt("ionChange",function(){t.eBV(n);const c=t.XpG(2);return t.Njj(c.startDate())}),t.DNE(14,v,2,2,"ion-select-option",20),t.k0s(),t.nrm(15,"ion-icon",21),t.k0s(),t.nrm(16,"br"),t.j41(17,"p",17),t.EFF(18),t.k0s(),t.j41(19,"ion-item",18)(20,"ion-select",22),t.mxI("ngModelChange",function(c){t.eBV(n);const g=t.XpG(2);return t.DH7(g.start_date,c)||(g.start_date=c),t.Njj(c)}),t.bIt("ionChange",function(){t.eBV(n);const c=t.XpG(2);return t.Njj(c.startDate())}),t.DNE(21,_,2,2,"ion-select-option",20),t.k0s(),t.nrm(22,"ion-icon",21),t.k0s(),t.nrm(23,"br"),t.DNE(24,C,4,3,"div",23)(25,l,5,2,"ion-item",24)(26,d,2,1,"ion-button",25),t.k0s()()()}if(2&a){const n=t.XpG(2);t.R7$(2),t.Y8G("ngIf",!n.isMobile),t.R7$(),t.Y8G("size",n.isMobile?12:6),t.R7$(3),t.SpI("",n.text.delivery_address," "),t.R7$(),t.Y8G("ngIf",n.address),t.R7$(4),t.JRh(n.text.checkout_desc),t.R7$(2),t.FS9("label",n.text.sub_time_title),t.R50("ngModel",n.sub_time),t.R7$(),t.Y8G("ngForOf",n.data.time),t.R7$(4),t.JRh(n.text.starting_date_desc),t.R7$(2),t.FS9("label",n.text.start_date),t.R50("ngModel",n.start_date),t.R7$(),t.Y8G("ngForOf",n.data.dates),t.R7$(3),t.Y8G("ngIf",n.cal),t.R7$(),t.Y8G("ngIf",n.cal&&n.cal.total),t.R7$(),t.Y8G("ngIf",!n.isMobile)}}function R(a,u){if(1&a&&(t.j41(0,"ion-content",5)(1,"ion-grid",9),t.DNE(2,N,2,1,"div",2)(3,b,27,15,"div",2),t.k0s()()),2&a){const n=t.XpG();t.R7$(),t.Y8G("fixed",!0),t.R7$(),t.Y8G("ngIf",!n.data),t.R7$(),t.Y8G("ngIf",n.data)}}function I(a,u){if(1&a&&(t.j41(0,"ion-button",41),t.EFF(1),t.k0s()),2&a){const n=t.XpG();t.R7$(),t.JRh(n.text.checkout_button)}}function D(a,u){1&a&&(t.j41(0,"ion-button",42),t.nrm(1,"ion-spinner",43),t.k0s())}function L(a,u){if(1&a&&(t.j41(0,"p",50),t.EFF(1),t.k0s()),2&a){const n=t.XpG(3);t.R7$(),t.LHq("",n.text.you_have_to," ",n.cal.currency,"",n.total-n.data.user.wallet," ",n.text.add_more,"")}}function Y(a,u){if(1&a){const n=t.RV6();t.j41(0,"ion-button",51),t.bIt("click",function(){t.eBV(n);const c=t.XpG(3);return t.Njj(c.placeOrder())}),t.EFF(1),t.k0s()}if(2&a){const n=t.XpG(3);t.R7$(),t.JRh(n.text.checkout_button)}}function A(a,u){1&a&&(t.j41(0,"ion-button",42),t.nrm(1,"ion-spinner",43),t.k0s())}function U(a,u){if(1&a&&(t.j41(0,"div",45)(1,"h3",46),t.EFF(2),t.k0s(),t.j41(3,"ion-item")(4,"ion-label"),t.EFF(5),t.j41(6,"span",47),t.EFF(7),t.k0s()()(),t.j41(8,"ion-item")(9,"ion-label"),t.EFF(10),t.j41(11,"span",47),t.EFF(12),t.k0s()()(),t.DNE(13,L,2,4,"p",48),t.nrm(14,"br"),t.DNE(15,Y,2,1,"ion-button",49)(16,A,2,0,"ion-button",7),t.k0s()),2&a){const n=t.XpG(2);t.R7$(2),t.JRh(n.text.summery),t.R7$(3),t.SpI("",n.text.total_amount," "),t.R7$(2),t.Lme("",n.cal.currency,"",n.total,""),t.R7$(3),t.SpI("",n.text.wallet_amount," "),t.R7$(2),t.Lme("",n.cal.currency,"",n.data.user.wallet,""),t.R7$(),t.Y8G("ngIf",n.total>n.data.user.wallet),t.R7$(2),t.Y8G("ngIf",!n.hasClick),t.R7$(),t.Y8G("ngIf",n.hasClick)}}function W(a,u){1&a&&(t.j41(0,"ion-modal",44),t.DNE(1,U,17,10,"ng-template"),t.k0s()),2&a&&t.Y8G("initialBreakpoint",1)("breakpoints",t.lJ4(2,M))}(0,e.kz)();let z=(()=>{var a;class u{constructor(i,c,g){this.server=i,this.otherService=c,this.modalCtrl=g,this.fakeData=[1,2,3,4,5,6],this.hasClick=!1,this.show=!0,this.isMobile=!1,this.otherService.statusBar("#ffffff",2);const O=localStorage.getItem("app_lang");null!==O&&(this.text=JSON.parse(O),this.text=this.text.text),this.checkScreenSize()}onResize(i){this.checkScreenSize()}checkScreenSize(){this.isMobile=window.innerWidth<=768}ngOnInit(){}ionViewDidEnter(){this.loadData()}loadData(){var i=this;return(0,x.A)(function*(){i.server.checkoutData().subscribe(c=>{i.data=c.data,console.log("this.data",i.data),i.savedAddress=i.data.address})})()}validate(){return!!(this.sub_time&&this.start_date&&this.address)}getAddress(){var i=this;return(0,x.A)(function*(){const c={data:i.savedAddress,store_id:i.data.store.id},g=yield i.modalCtrl.create({component:E.AddressPage,animated:!0,mode:"ios",componentProps:c});return g.onDidDismiss().then(O=>{console.log(O),O.data.id&&(i.address=O.data)}),yield g.present()})()}startDate(){var i=this;return(0,x.A)(function*(){if(!i.sub_time)return i.otherService.toast(i.text.sub_time);if(!i.start_date)return;i.otherService.showLoading();const c={plan:i.sub_time,start_date:i.start_date,cart_no:localStorage.getItem("cart_no"),user_id:localStorage.getItem("user_id"),store_id:i.data.store.id};i.server.getAmount(c).subscribe(g=>{i.cal=g,i.total=i.cal.total,i.otherService.hideLoading(),console.log(i.cal.summery)})})()}checkout(){var i=this;return(0,x.A)(function*(){i.hasClick=!0;const c={user_id:localStorage.getItem("user_id"),cart_no:localStorage.getItem("cart_no"),cal:i.cal,address:i.address.id,plan:i.sub_time,total:i.total,discount:i.save,store_id:i.data.store.id,notes:localStorage.getItem("order_notes")&&"undefined"!=localStorage.getItem("order_notes")?localStorage.getItem("order_notes"):null};i.server.placeOrder(c).subscribe(g=>{1==g.done?(i.show=!1,localStorage.removeItem("order_notes"),i.otherService.redirect("success")):i.otherService.toast(g.error),i.hasClick=!1})})()}placeOrder(){var i=this;return(0,x.A)(function*(){i.validate()?i.total>i.data.user.wallet?i.openModel({amount:i.total-i.data.user.wallet,stripe_key:i.data.stripe_id}):i.checkout():i.otherService.toast(i.text.all_field)})()}openModel(i){var c=this;return(0,x.A)(function*(){const g=yield c.modalCtrl.create({component:j.PaymentPage,animated:!0,mode:"ios",componentProps:{data:i}});return g.onDidDismiss().then(O=>{O.data?c.checkout():c.otherService.toast(c.text.payment_cancel)}),yield g.present()})()}getOffer(){var i=this;return(0,x.A)(function*(){const c=yield i.modalCtrl.create({component:T.OfferPage,animated:!0,mode:"ios",componentProps:{data:i.data.offer}});return c.onDidDismiss().then(g=>{g.data.code&&(i.offer=g.data,i.applyOffer())}),yield c.present()})()}applyOffer(){var i=this;return(0,x.A)(function*(){if(1==i.offer.type){const c=i.cal.total*i.offer.value/100;i.total=i.cal.total-c,i.save=c.toFixed(1)}else i.total=i.cal.total-i.offer.value,i.save=i.offer.value})()}}return(a=u).\u0275fac=function(i){return new(i||a)(t.rXU(G.Z),t.rXU(o.G),t.rXU(s.W3))},a.\u0275cmp=t.VBU({type:a,selectors:[["app-checkout"]],hostBindings:function(i,c){1&i&&t.bIt("resize",function(O){return c.onResize(O)},!1,t.tSv)},decls:12,vars:5,consts:[[1,"ion-no-border"],["color","dark"],[4,"ngIf"],["slot","start"],["class","ion-padding",4,"ngIf"],[1,"ion-padding"],["mode","ios","expand","block","color","dark","id","open-modal","expand","block",4,"ngIf"],["mode","ios","color","dark","expand","block",4,"ngIf"],["trigger","open-modal",3,"initialBreakpoint","breakpoints",4,"ngIf"],[3,"fixed"],["class","sek1",3,"animated",4,"ngFor","ngForOf"],[1,"sek1",3,"animated"],["size","6",4,"ngIf"],[3,"size"],["lines","none","detail","",1,"address",3,"click"],["class","address",4,"ngIf"],["name","location-outline","slot","start","color","dark"],[1,"desc"],["lines","none",1,"address"],["placeholder","Select","interface","popover","name","sub_time",3,"ngModelChange","ionChange","label","ngModel"],[3,"value",4,"ngFor","ngForOf"],["name","calendar-outline","slot","start","color","dark"],["placeholder","Select","interface","popover","name","start_date",3,"ngModelChange","ionChange","label","ngModel"],["class","sum",4,"ngIf"],["lines","none","detail","","class","address",3,"click",4,"ngIf"],["mode","ios","expand","block","color","dark","id","open-modal","expand","block",3,"click",4,"ngIf"],["size","6"],["src","assets/checkout.webp"],[1,"address"],[3,"value"],[1,"sum"],[4,"ngFor","ngForOf"],["style","font-size: 16px;",4,"ngIf"],["size","12"],["size","12",1,"start"],["size","12",1,"amount"],[2,"font-size","16px"],["class","discount",4,"ngIf"],["name","receipt-outline","slot","start","color","dark"],[1,"discount"],["mode","ios","expand","block","color","dark","id","open-modal","expand","block",3,"click"],["mode","ios","expand","block","color","dark","id","open-modal","expand","block"],["mode","ios","color","dark","expand","block"],["name","crescent"],["trigger","open-modal",3,"initialBreakpoint","breakpoints"],[1,"block","ion-padding"],[2,"margin-left","15px"],[2,"float","right"],["align","center","style","font-size: 14px;color:gray",4,"ngIf"],["mode","ios","color","dark","expand","block",3,"click",4,"ngIf"],["align","center",2,"font-size","14px","color","gray"],["mode","ios","color","dark","expand","block",3,"click"]],template:function(i,c){1&i&&(t.j41(0,"ion-header",0)(1,"ion-toolbar",1),t.DNE(2,$,2,1,"ion-title",2),t.j41(3,"ion-buttons",3),t.nrm(4,"ion-back-button"),t.k0s()()(),t.DNE(5,R,4,3,"ion-content",4),t.j41(6,"ion-footer",0)(7,"ion-toolbar")(8,"div",5),t.DNE(9,I,2,1,"ion-button",6)(10,D,2,0,"ion-button",7)(11,W,2,3,"ion-modal",8),t.k0s()()()),2&i&&(t.R7$(2),t.Y8G("ngIf",c.text),t.R7$(3),t.Y8G("ngIf",c.text),t.R7$(4),t.Y8G("ngIf",!c.hasClick&&c.isMobile),t.R7$(),t.Y8G("ngIf",c.hasClick&&c.isMobile),t.R7$(),t.Y8G("ngIf",c.cal&&c.cal.total&&c.address&&c.show))},dependencies:[s.bv,s.Jm,s.QW,s.hU,s.W9,s.M0,s.lO,s.eU,s.iq,s.uz,s.he,s.ln,s.Nm,s.Ip,s.ds,s.w2,s.BC,s.ai,s.Sb,s.Je,s.el,P.MD,P.Sq,P.bT,F.YN,F.BC,F.vS],styles:["ion-item[_ngcontent-%COMP%]{border-radius:10px;color:#000!important}.sum[_ngcontent-%COMP%]{border:1px solid #d9d9d9;margin-bottom:20px;background-color:#f3efe1;border-radius:10px}.sum[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{border-bottom:1px solid #d9d9d9;padding:10px}.sum[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding:5px 10px;font-size:20px}.block[_ngcontent-%COMP%]{width:100%;height:300px}ion-modal[_ngcontent-%COMP%]{--height: auto}.address[_ngcontent-%COMP%]{--min-height: 60px !important;--padding-start: 20px;--padding-end: 20px;--background: var(--ion-color-light)}.sek1[_ngcontent-%COMP%]{width:96%;height:50px;border-radius:10px;margin-left:2%;margin-top:10%}.address[_ngcontent-%COMP%]{display:block;margin-top:5px;color:gray}.desc[_ngcontent-%COMP%]{font-size:14px;color:gray}.amount[_ngcontent-%COMP%]{font-size:14px}.start[_ngcontent-%COMP%]{font-size:14px;margin-top:10px}.discount[_ngcontent-%COMP%]{display:block;margin-top:5px;color:red}"]}),u})()},5864:(B,y,r)=>{r.r(y),r.d(y,{OfferPage:()=>X});var x=r(467),P=r(177),F=r(4341),s=r(4742),e=r(4438),E=r(9568),j=r(3656);function T(m,v){if(1&m){const _=e.RV6();e.j41(0,"ion-button",4),e.bIt("click",function(){e.eBV(_);const k=e.XpG();return e.Njj(k.close())}),e.EFF(1),e.k0s()}if(2&m){const _=e.XpG();e.R7$(),e.JRh(_.text.cancel)}}function t(m,v){if(1&m&&(e.j41(0,"p",8),e.EFF(1),e.k0s()),2&m){const _=e.XpG(2);e.R7$(),e.JRh(_.text.no_offer)}}function G(m,v){if(1&m&&(e.j41(0,"ion-item",13)(1,"ion-avatar",14),e.nrm(2,"img",15),e.k0s(),e.j41(3,"ion-label",16)(4,"b"),e.EFF(5),e.k0s(),e.j41(6,"span",17),e.EFF(7),e.k0s()()()),2&m){const _=e.XpG().$implicit;e.R7$(5),e.JRh(_.code),e.R7$(2),e.JRh(_.desc)}}function o(m,v){if(1&m){const _=e.RV6();e.j41(0,"div",11),e.bIt("click",function(){const k=e.eBV(_).$implicit,p=e.XpG(3);return e.Njj(p.setOffer(k))}),e.DNE(1,G,8,2,"ion-item",12),e.k0s()}if(2&m){const _=v.$implicit,h=e.XpG(3);e.R7$(),e.Y8G("ngIf","SUBSCRIPTION"==h.type&&"SUBSCRIPTION"==_.subscription)}}function M(m,v){if(1&m&&(e.j41(0,"ion-item",13)(1,"ion-avatar",14),e.nrm(2,"img",15),e.k0s(),e.j41(3,"ion-label",16)(4,"b"),e.EFF(5),e.k0s(),e.j41(6,"span",17),e.EFF(7),e.k0s()()()),2&m){const _=e.XpG().$implicit;e.R7$(5),e.JRh(_.code),e.R7$(2),e.JRh(_.desc)}}function $(m,v){if(1&m){const _=e.RV6();e.j41(0,"div",11),e.bIt("click",function(){const k=e.eBV(_).$implicit,p=e.XpG(3);return e.Njj(p.setOffer(k))}),e.DNE(1,M,8,2,"ion-item",12),e.k0s()}if(2&m){const _=v.$implicit,h=e.XpG(3);e.R7$(),e.Y8G("ngIf","NORMAL"==h.type&&"NORMAL"==_.subscription)}}function S(m,v){if(1&m&&(e.j41(0,"div")(1,"ion-note",9),e.EFF(2),e.k0s(),e.nrm(3,"br")(4,"br"),e.DNE(5,o,2,1,"div",10)(6,$,2,1,"div",10),e.k0s()),2&m){const _=e.XpG(2);e.R7$(2),e.JRh(_.text.avilable_offer),e.R7$(3),e.Y8G("ngForOf",_.data),e.R7$(),e.Y8G("ngForOf",_.data)}}function N(m,v){if(1&m&&(e.j41(0,"ion-content",5),e.DNE(1,t,2,1,"p",6)(2,S,7,3,"div",7),e.k0s()),2&m){const _=e.XpG();e.R7$(),e.Y8G("ngIf",_.data&&0==_.data.length),e.R7$(),e.Y8G("ngIf",_.data&&_.data.length>0)}}let X=(()=>{var m;class v{constructor(h,k){this.otherService=h,this.navParams=k,this.data=k.get("data"),this.type=k.get("type"),console.log("this.type",this.type);const p=localStorage.getItem("app_lang");null!==p&&(this.text=JSON.parse(p),this.text=this.text.text)}ngOnInit(){}close(h=null){var k=this;return(0,x.A)(function*(){k.otherService.closeModel(h)})()}setOffer(h){var k=this;return(0,x.A)(function*(){k.otherService.closeModel(h)})()}}return(m=v).\u0275fac=function(h){return new(h||m)(e.rXU(E.G),e.rXU(j.y8))},m.\u0275cmp=e.VBU({type:m,selectors:[["app-offer"]],decls:5,vars:2,consts:[[1,"ion-no-border"],["slot","end"],["color","medium",3,"click",4,"ngIf"],["class","ion-padding",4,"ngIf"],["color","medium",3,"click"],[1,"ion-padding"],["align","center",4,"ngIf"],[4,"ngIf"],["align","center"],[2,"color","black"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["lines","none","detail","","style","cursor: pointer;",4,"ngIf"],["lines","none","detail","",2,"cursor","pointer"],["slot","start"],["src","assets/discount-icon.png"],[1,"ion-text-wrap"],[2,"display","block","margin-top","5px"]],template:function(h,k){1&h&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.DNE(3,T,2,1,"ion-button",2),e.k0s()()(),e.DNE(4,N,3,2,"ion-content",3)),2&h&&(e.R7$(3),e.Y8G("ngIf",k.text),e.R7$(),e.Y8G("ngIf",k.data&&k.text))},dependencies:[s.bv,s.mC,s.Jm,s.QW,s.W9,s.eU,s.uz,s.he,s.JI,s.ai,P.MD,P.Sq,P.bT,F.YN],styles:["ion-item[_ngcontent-%COMP%]{margin-top:20px;--min-height: 50px !important;border-radius:5px}ion-content[_ngcontent-%COMP%]{--background: var(--ion-color-light)}"]}),v})()},5704:(B,y,r)=>{r.r(y),r.d(y,{PaymentPage:()=>k});var x=r(467),P=r(177),F=r(4341),s=r(4742),e=r(5083),E=r(3923);const j=(0,e.F3)("Stripe",{web:()=>r.e(1651).then(r.bind(r,1651)).then(p=>new p.StripeWeb)});var T=r(1594),t=r(9350),o=r(4438),M=r(3656),$=r(9568),S=r(1626),N=r(2068);function X(p,C){if(1&p){const f=o.RV6();o.j41(0,"ion-button",4),o.bIt("click",function(){o.eBV(f);const d=o.XpG();return o.Njj(d.close())}),o.EFF(1),o.k0s()}if(2&p){const f=o.XpG();o.R7$(),o.JRh(f.text.cancel)}}function m(p,C){1&p&&o.nrm(0,"ion-spinner",13)}function v(p,C){if(1&p){const f=o.RV6();o.j41(0,"ion-item",8),o.bIt("click",function(){o.eBV(f);const d=o.XpG(2);return o.Njj(d.paymentSheet())}),o.j41(1,"ion-thumbnail",9),o.nrm(2,"img",12),o.k0s(),o.j41(3,"ion-label"),o.EFF(4),o.k0s(),o.DNE(5,m,1,0,"ion-spinner",11),o.k0s()}if(2&p){const f=o.XpG(2);o.R7$(4),o.JRh(f.text.credit),o.R7$(),o.Y8G("ngIf",1==f.payment_method)}}function _(p,C){1&p&&o.nrm(0,"ion-spinner",13)}function h(p,C){if(1&p){const f=o.RV6();o.j41(0,"ion-content",5)(1,"h3"),o.EFF(2),o.j41(3,"ion-badge",6),o.EFF(4),o.k0s()(),o.nrm(5,"br")(6,"br"),o.DNE(7,v,6,2,"ion-item",7),o.nrm(8,"br"),o.j41(9,"ion-item",8),o.bIt("click",function(){o.eBV(f);const d=o.XpG();return o.Njj(d.payWithRazorpay())}),o.j41(10,"ion-label"),o.EFF(11),o.k0s(),o.j41(12,"ion-thumbnail",9),o.nrm(13,"img",10),o.k0s(),o.DNE(14,_,1,0,"ion-spinner",11),o.k0s(),o.nrm(15,"br")(16,"br")(17,"br")(18,"br"),o.j41(19,"b"),o.EFF(20,"For stripe use these Test card detail : "),o.k0s(),o.j41(21,"p"),o.EFF(22,"Card No : 4242 4242 4242 4242"),o.k0s(),o.j41(23,"p"),o.EFF(24,"Exp. 12/25 CVV : 321"),o.k0s()()}if(2&p){const f=o.XpG();o.R7$(2),o.SpI("",f.text.select_payment_method," "),o.R7$(2),o.Lme("",f.setting.currency,"",f.data.amount,""),o.R7$(3),o.Y8G("ngIf",f.setting.stripe_key),o.R7$(4),o.SpI(" ",f.text.upi,""),o.R7$(3),o.Y8G("ngIf",2==f.payment_method)}}let k=(()=>{var p;class C{constructor(l,d,b,R){this.navParams=l,this.otherService=d,this.http=b,this.server=R,this.data=l.get("data");const I=localStorage.getItem("admin_setting"),D=localStorage.getItem("user_data");null!==I&&(this.setting=JSON.parse(I)),null!==D&&(this.user=JSON.parse(D));const L=localStorage.getItem("app_lang");null!==L&&(this.text=JSON.parse(L),this.text=this.text.text),j.initialize({publishableKey:this.data.stripe_key}),this.meta={counsumer_id:778383,consumer_mac:"sdjksfhsd887f8s"},this.customizations={title:"Wallet Recharge",description:"Wallet Recharge",logo:"https://dicont.s3.amazonaws.com/static/flow-logos/flutterwave-logo.png"},this.customerDetails={name:this.user.name,email:this.user.email,phone_number:this.user.phone}}ngOnInit(){}updateWallet(l=null){var d=this;return(0,x.A)(function*(){const b={amount:d.data.amount,user_id:localStorage.getItem("user_id"),trans_id:l,payment_method:d.payment_method,notes:"Wallet Recharge"};d.server.updateWallet(b).subscribe(R=>{d.payment_method=null,d.otherService.toast(d.text.payment_added),d.close(l)})})()}close(l=null){var d=this;return(0,x.A)(function*(){d.otherService.closeModel(l)})()}httpPost(){const l={user:localStorage.getItem("user_id"),total:this.data.amount};return this.http.post(this.server.getApiUrl()+"stripePayment",l).pipe((0,T.$)())}paymentSheet(){var l=this;return(0,x.A)(function*(){l.payment_method=1;try{j.addListener(E.SQ.Completed,()=>{console.log("PaymentSheetEventsEnum.Completed")});const d=l.httpPost();console.log(d);const{paymentIntent:b,ephemeralKey:R,customer:I}=yield function G(p,C){const f="object"==typeof C;return new Promise((l,d)=>{let R,b=!1;p.subscribe({next:I=>{R=I,b=!0},error:d,complete:()=>{b?l(R):f?l(C.defaultValue):d(new t.G)}})})}(d);yield j.createPaymentSheet({paymentIntentClientSecret:b,customerId:I,customerEphemeralKeySecret:R,merchantDisplayName:l.setting.app_name});const D=yield j.presentPaymentSheet();console.log("result: ",D),D&&D.paymentResult===E.SQ.Completed?l.updateWallet(l.splitAndJoin(b)):l.otherService.toast(l.text.payment_cancel)}catch{l.otherService.toast(l.text.payment_cancel)}})()}splitAndJoin(l){const d=l.split("_").slice(0,2).join("_");return console.log(d),d}payWithRazorpay(){var l=this;return(0,x.A)(function*(){RazorpayCheckout.open({description:"Pay Now",image:"https://cdn.iconscout.com/icon/free/png-512/bhim-3-69845.png",currency:"INR",key:l.setting.razor_key,amount:100*l.data.amount,name:l.user.name,prefill:{email:l.user.email,contact:l.user.phone},theme:{color:"#2196f3"},modal:{ondismiss:function(){alert("dismissed")}}},I=>{l.updateWallet(Date.now())},I=>{l.otherService.toast(l.text.payment_cancel)})})()}}return(p=C).\u0275fac=function(l){return new(l||p)(o.rXU(M.y8),o.rXU($.G),o.rXU(S.Qq),o.rXU(N.Z))},p.\u0275cmp=o.VBU({type:p,selectors:[["app-payment"]],decls:5,vars:2,consts:[[1,"ion-no-border"],["slot","end"],["color","medium",3,"click",4,"ngIf"],["class","ion-padding",4,"ngIf"],["color","medium",3,"click"],[1,"ion-padding"],["color","dark",2,"float","right","margin-top","5px"],["lines","none","detail","",3,"click",4,"ngIf"],["lines","none","detail","",3,"click"],["slot","start"],["src","assets/razor.png"],["name","crescent","slot","end",4,"ngIf"],["src","assets/stripe.png"],["name","crescent","slot","end"]],template:function(l,d){1&l&&(o.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),o.DNE(3,X,2,1,"ion-button",2),o.k0s()()(),o.DNE(4,h,25,6,"ion-content",3)),2&l&&(o.R7$(3),o.Y8G("ngIf",d.text),o.R7$(),o.Y8G("ngIf",d.data&&d.text))},dependencies:[s.bv,s.In,s.Jm,s.QW,s.W9,s.eU,s.uz,s.he,s.w2,s.Zx,s.ai,P.MD,P.bT,F.YN],styles:["ion-item[_ngcontent-%COMP%]{border-radius:5px;--min-height:60px;border:1px solid #f1f1f1}ion-toolbar[_ngcontent-%COMP%]{--background: white}ion-thumbnail[_ngcontent-%COMP%]{width:32px;height:32px}"]}),C})()}}]);