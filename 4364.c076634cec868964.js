"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4364],{4364:(v,u,a)=>{a.r(u),a.d(u,{OtpPage:()=>S});var g=a(177),l=a(4341),r=a(4742),t=a(4438),h=a(2068),d=a(9568);function f(o,_){1&o&&t.nrm(0,"ion-col",20)}function m(o,_){if(1&o){const c=t.RV6();t.j41(0,"ion-row",21),t.nrm(1,"ion-col",10),t.j41(2,"ion-col",22)(3,"ion-input",23,1),t.bIt("ionInput",function(e){t.eBV(c);const i=t.sdS(7),s=t.XpG();return t.Njj(s.otpChange(e,i,""))}),t.k0s()(),t.j41(5,"ion-col",22)(6,"ion-input",24,2),t.bIt("ionInput",function(e){t.eBV(c);const i=t.sdS(4),s=t.sdS(10),p=t.XpG();return t.Njj(p.otpChange(e,s,i))}),t.k0s()(),t.j41(8,"ion-col",22)(9,"ion-input",25,3),t.bIt("ionInput",function(e){t.eBV(c);const i=t.sdS(7),s=t.sdS(13),p=t.XpG();return t.Njj(p.otpChange(e,s,i))}),t.k0s()(),t.j41(11,"ion-col",22)(12,"ion-input",26,4),t.bIt("ionInput",function(e){t.eBV(c);const i=t.sdS(10),s=t.XpG();return t.Njj(s.otpChange(e,"",i))}),t.k0s()(),t.nrm(14,"ion-col",22),t.k0s()}if(2&o){const c=t.XpG();t.R7$(),t.Y8G("size",c.isMobile?1:2)}}function I(o,_){1&o&&(t.j41(0,"p",27),t.nrm(1,"ion-spinner",28),t.k0s())}function O(o,_){if(1&o&&(t.j41(0,"ion-button",29),t.EFF(1),t.k0s()),2&o){const c=t.XpG();t.R7$(),t.JRh(c.text.verify)}}function b(o,_){1&o&&t.nrm(0,"ion-col",20)}let S=(()=>{var o;class _{constructor(n,e){this.server=n,this.otherService=e,this.OTP="",this.hasClick=!1,this.isMobile=!1;const i=localStorage.getItem("user_res");null!==i&&(this.res=JSON.parse(i));const s=localStorage.getItem("app_lang");null!==s&&(this.text=JSON.parse(s),this.text=this.text.text),this.title=3==this.res.codeSent?this.text.verify_email:this.text.verify_phone,this.desc=3==this.res.codeSent?this.text.email_code_sent:this.text.phone_code_sent,this.checkScreenSize()}onResize(n){this.checkScreenSize()}checkScreenSize(){this.isMobile=window.innerWidth<=768}ngOnInit(){}ionViewWillEnter(){this.otherService.statusBar("#ffc927",2)}otpChange(n,e,i){if(n.target.value.length<1&&i)i.setFocus();else{if(!(e&&n.target.value.length>0))return 0;e.setFocus()}return 0}verify(n){if(!(n.otp_1&&n.otp_2&&n.otp_3&&n.otp_4))return this.otherService.toast(this.text.valid_otp);this.hasClick=!0,this.server.verifyOtp(n,this.res.user.id).subscribe(e=>{this.hasClick=!1,"done"!=e.msg?this.otherService.toast(e.error):0==this.res.user.status?(localStorage.setItem("user_id",e.user.id),localStorage.setItem("user_data",JSON.stringify(e.user)),this.otherService.toast(this.text.account_created),localStorage.getItem("cart_no")&&null!=localStorage.getItem("cart_no")?this.otherService.redirect("cart","root"):this.otherService.redirect("account","root")):(localStorage.setItem("temp_user_id",e.user.id),this.otherService.redirect("password","root"))})}resend(){this.hasClick=!0,this.server.resendCode(this.res.user.id).subscribe(n=>{this.hasClick=!1,this.otherService.toast(this.text.new_code_sent)})}}return(o=_).\u0275fac=function(n){return new(n||o)(t.rXU(h.Z),t.rXU(d.G))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-otp"]],hostBindings:function(n,e){1&n&&t.bIt("resize",function(s){return e.onResize(s)},!1,t.tSv)},decls:27,vars:12,consts:[["form","ngForm"],["otp1",""],["otp2",""],["otp3",""],["otp4",""],[1,"ion-no-border"],["color","dark"],[1,"ion-padding",3,"fullscreen"],[3,"fixed"],["size","3",4,"ngIf"],[3,"size"],[1,"signup-card"],[3,"ngSubmit"],[1,"headTitle"],[2,"font-size","14px","color","gray","text-align","center"],["style","text-align: center;",4,"ngIf"],["align","center",4,"ngIf"],["mode","ios","expand","block","color","dark","type","submit",4,"ngIf"],["align","center",2,"color","gray","font-size","14px","cursor","pointer"],[3,"click"],["size","3"],[2,"text-align","center"],["size","2"],["type","tel","maxlength","1","name","otp_1","ngModel","",3,"ionInput"],["type","tel","maxlength","1","name","otp_2","ngModel","",3,"ionInput"],["type","tel","maxlength","1","name","otp_3","ngModel","",3,"ionInput"],["type","tel","maxlength","1","name","otp_4","ngModel","",3,"ionInput"],["align","center"],["name","crescent"],["mode","ios","expand","block","color","dark","type","submit"]],template:function(n,e){if(1&n){const i=t.RV6();t.j41(0,"ion-header",5)(1,"ion-toolbar",6)(2,"ion-buttons"),t.nrm(3,"ion-back-button"),t.k0s()()(),t.j41(4,"ion-content",7)(5,"ion-grid",8)(6,"ion-row"),t.DNE(7,f,1,0,"ion-col",9),t.j41(8,"ion-col",10)(9,"ion-card",11)(10,"form",12,0),t.bIt("ngSubmit",function(){t.eBV(i);const p=t.sdS(11);return t.Njj(e.verify(p.value))}),t.j41(12,"h2",13),t.EFF(13),t.k0s(),t.j41(14,"p",14),t.EFF(15),t.k0s(),t.nrm(16,"br"),t.DNE(17,m,15,1,"ion-row",15)(18,I,2,0,"p",16),t.nrm(19,"br"),t.DNE(20,O,2,1,"ion-button",17),t.nrm(21,"br"),t.j41(22,"p",18),t.EFF(23),t.j41(24,"a",19),t.bIt("click",function(){return t.eBV(i),t.Njj(e.resend())}),t.EFF(25),t.k0s()()()()(),t.DNE(26,b,1,0,"ion-col",9),t.k0s()()()}2&n&&(t.R7$(4),t.Y8G("fullscreen",!0),t.R7$(),t.Y8G("fixed",!0),t.R7$(2),t.Y8G("ngIf",!e.isMobile),t.R7$(),t.Y8G("size",e.isMobile?12:6),t.R7$(5),t.JRh(e.title),t.R7$(2),t.JRh(e.desc),t.R7$(2),t.Y8G("ngIf",!e.hasClick),t.R7$(),t.Y8G("ngIf",e.hasClick),t.R7$(2),t.Y8G("ngIf",!e.hasClick),t.R7$(3),t.SpI("",e.text.dont_otp," "),t.R7$(2),t.JRh(e.text.resend_code),t.R7$(),t.Y8G("ngIf",!e.isMobile))},dependencies:[r.bv,r.Jm,r.QW,r.b_,r.hU,r.W9,r.lO,r.eU,r.$w,r.ln,r.w2,r.ai,r.Gw,r.el,g.MD,g.bT,l.YN,l.qT,l.BC,l.cb,l.tU,l.vS,l.cV],styles:["ion-content[_ngcontent-%COMP%]{--background: var(--ion-color-light)}p[_ngcontent-%COMP%]{color:gray}ion-input[_ngcontent-%COMP%]{display:inline-block;width:50px;height:50px;margin:10px;border-radius:50%;color:#000!important;--background: #e1e1e1;--padding-start: 7px;font-size:25px}.signup-card[_ngcontent-%COMP%]{width:100%;border-radius:12px;box-shadow:0 4px 10px #0003;background:#fff}.headTitle[_ngcontent-%COMP%]{text-align:center}"]}),_})()}}]);