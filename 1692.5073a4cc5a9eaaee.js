"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1692],{7762:(C,u,n)=>{n.d(u,{L:()=>d});const d=(0,n(5083).F3)("Geolocation",{web:()=>n.e(2920).then(n.bind(n,2920)).then(m=>new m.GeolocationWeb)})},1692:(C,u,n)=>{n.r(u),n.d(u,{MapPage:()=>G});var p=n(467),d=n(177),m=n(4341),r=n(4742),O=n(4613),e=n(4438),f=n(3656),x=n(9568),s=n(1208);const M=["map"];function l(a,_){if(1&a&&(e.j41(0,"ion-title"),e.EFF(1),e.k0s()),2&a){const o=e.XpG();e.R7$(),e.JRh(o.text.choose_location)}}function R(a,_){if(1&a){const o=e.RV6();e.j41(0,"ion-item",12),e.bIt("click",function(){const i=e.eBV(o).$implicit,c=e.XpG(2);return e.Njj(c.SelectSearchResult(i))}),e.EFF(1),e.k0s()}if(2&a){const o=_.$implicit,t=e.XpG(2);e.Y8G("hidden",0==t.autocompleteItems.length),e.R7$(),e.SpI(" ",o.description," ")}}function v(a,_){if(1&a&&(e.j41(0,"ion-item",13)(1,"label"),e.EFF(2),e.k0s(),e.nrm(3,"ion-icon",14),e.k0s()),2&a){const o=e.XpG(2);e.R7$(2),e.JRh(o.address)}}function P(a,_){1&a&&(e.j41(0,"div",15),e.nrm(1,"ion-icon",16),e.k0s())}function g(a,_){1&a&&(e.j41(0,"div",15)(1,"p",17),e.nrm(2,"ion-spinner",18),e.k0s()())}function E(a,_){if(1&a){const o=e.RV6();e.j41(0,"ion-fab",19),e.bIt("click",function(){e.eBV(o);const i=e.XpG(2);return e.Njj(i.loadMap())}),e.j41(1,"ion-fab-button",20),e.nrm(2,"ion-icon",21),e.k0s()()}}function D(a,_){if(1&a){const o=e.RV6();e.j41(0,"ion-content")(1,"ion-searchbar",5),e.mxI("ngModelChange",function(i){e.eBV(o);const c=e.XpG();return e.DH7(c.autocomplete,i)||(c.autocomplete=i),e.Njj(i)}),e.bIt("ionInput",function(){e.eBV(o);const i=e.XpG();return e.Njj(i.UpdateSearchResults())})("ionClear",function(){e.eBV(o);const i=e.XpG();return e.Njj(i.ClearAutocomplete())}),e.k0s(),e.DNE(2,R,2,2,"ion-item",6)(3,v,4,1,"ion-item",7),e.j41(4,"div",8),e.DNE(5,P,2,0,"div",9)(6,g,3,0,"div",9),e.nrm(7,"div",10,0),e.k0s(),e.DNE(9,E,3,0,"ion-fab",11),e.k0s()}if(2&a){const o=e.XpG();e.R7$(),e.FS9("placeholder",o.text.search_location),e.R50("ngModel",o.autocomplete),e.R7$(),e.Y8G("ngForOf",o.autocompleteItems),e.R7$(),e.Y8G("ngIf",o.address),e.R7$(2),e.Y8G("ngIf",!o.show),e.R7$(),e.Y8G("ngIf",o.show),e.R7$(3),e.Y8G("ngIf",!o.show)}}let G=(()=>{var a;class _{constructor(t,i,c,I){this.platform=t,this.zone=i,this.otherService=c,this.mapService=I,this.autocompleteItems=[],this.show=!0,this.GoogleAutocomplete=new google.maps.places.AutocompleteService,this.otherService.statusBar("#ffc927",2);const h=localStorage.getItem("app_lang");null!==h&&(this.text=JSON.parse(h),this.text=this.text.text)}ngOnInit(){}ionViewDidEnter(){this.platform.ready().then(()=>{this.loadMap()})}loadMap(){var t=this;return(0,p.A)(function*(){t.map=null,t.show=!0;let i=yield t.mapService.getMap();t.map=yield new google.maps.Map(t.mapElement.nativeElement,i),t.show=!1,t.map.addListener("tilesloaded",(0,p.A)(function*(){let c=yield t.mapService.getAddress(t.map.center.lat(),t.map.center.lng());t.address=c,localStorage.setItem("current_lat",t.map.center.lat()),localStorage.setItem("current_lng",t.map.center.lng()),localStorage.setItem("current_address",t.address)}))})()}UpdateSearchResults(){this.GoogleAutocomplete.getPlacePredictions({input:this.autocomplete},(t,i)=>{this.autocompleteItems=[],this.zone.run(()=>{t.forEach(c=>{this.autocompleteItems.push(c)})})})}SelectSearchResult(t){const i=new google.maps.Geocoder;new google.maps.InfoWindow,this.placeid=t.place_id,i.geocode({placeId:this.placeid},(I,h)=>{"OK"===h?I[0]?(this.map.setZoom(16),this.map.setCenter(I[0].geometry.location)):window.alert("No results found"):window.alert("Geocoder failed due to: "+h)}),this.ClearAutocomplete()}ClearAutocomplete(){this.autocompleteItems=[],this.autocomplete=""}}return(a=_).\u0275fac=function(t){return new(t||a)(e.rXU(f.OD),e.rXU(e.SKi),e.rXU(x.G),e.rXU(s.u))},a.\u0275cmp=e.VBU({type:a,selectors:[["app-map"]],viewQuery:function(t,i){if(1&t&&e.GBs(M,5),2&t){let c;e.mGM(c=e.lsd())&&(i.mapElement=c.first)}},decls:6,vars:2,consts:[["map",""],[1,"ion-no-border"],["color","primary"],["slot","start"],[4,"ngIf"],["mode","ios","color","secondary",3,"ngModelChange","ionInput","ionClear","ngModel","placeholder"],["tappable","",3,"hidden","click",4,"ngFor","ngForOf"],["lines","none","routerLink","/tabs/home","routerDirection","root",4,"ngIf"],[1,"map-wrapper"],["id","map_center",4,"ngIf"],["id","map"],["slot","fixed","horizontal","center","vertical","bottom",3,"click",4,"ngIf"],["tappable","",3,"click","hidden"],["lines","none","routerLink","/tabs/home","routerDirection","root"],["name","checkmark-circle","slot","end","color","dark",2,"font-size","40px"],["id","map_center"],["name","location","color","dark",2,"font-size","40px"],["align","center"],["name","crescent",2,"font-size","40px"],["slot","fixed","horizontal","center","vertical","bottom",3,"click"],["color","dark"],["name","locate"]],template:function(t,i){1&t&&(e.j41(0,"ion-header",1)(1,"ion-toolbar",2)(2,"ion-buttons",3),e.nrm(3,"ion-back-button"),e.k0s(),e.DNE(4,l,2,1,"ion-title",4),e.k0s()(),e.DNE(5,D,10,7,"ion-content",4)),2&t&&(e.R7$(4),e.Y8G("ngIf",i.text),e.R7$(),e.Y8G("ngIf",i.text))},dependencies:[r.bv,r.QW,r.W9,r.Q8,r.YW,r.eU,r.iq,r.uz,r.S1,r.w2,r.BC,r.ai,r.Gw,r.el,r.N7,d.MD,d.Sq,d.bT,m.YN,m.BC,m.vS,O.Wk],styles:["#map_canvas[_ngcontent-%COMP%]{width:100%;height:99%;border:1px solid red}#map[_ngcontent-%COMP%]{width:100%;height:85vh}.map-wrapper[_ngcontent-%COMP%]{position:relative}.map-wrapper[_ngcontent-%COMP%]   #map_center[_ngcontent-%COMP%]{position:absolute;z-index:99;height:40px;width:40px;top:50%;left:50%;margin-left:-21px;margin-top:-41px}ion-content[_ngcontent-%COMP%]{--background: var(--ion-color-primary)}"]}),_})()},1208:(C,u,n)=>{n.d(u,{u:()=>O});var p=n(467),d=n(7762),m=n(4438),r=n(6755);let O=(()=>{var e;class f{constructor(s){this.nativeGeocoder=s}getLocation(){const s=d.L.getCurrentPosition();return console.log("data ",s),s}getMap(){return(0,p.A)(function*(){const s=yield d.L.getCurrentPosition();return{center:yield new google.maps.LatLng(s.coords.latitude,s.coords.longitude),zoom:16,mapTypeId:google.maps.MapTypeId.ROADMAP}})()}getAddress(s,M){var l=this;return(0,p.A)(function*(){return yield l.nativeGeocoder.reverseGeocode(s,M,{useLocale:!0,maxResults:5}).then(function(){var v=(0,p.A)(function*(P){l.address="";let g=[];for(let[E,D]of Object.entries(P[0]))D.length>0&&g.push(D);g.reverse();for(let E of g)l.address+=E+", ";l.address=l.address.slice(0,-2)});return function(P){return v.apply(this,arguments)}}()).catch(v=>{}),console.log("Address  "+l.address),l.address})()}}return(e=f).\u0275fac=function(s){return new(s||e)(m.KVO(r.K))},e.\u0275prov=m.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),f})()}}]);