"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7564],{7564:(E,b,r)=>{r.r(b),r.d(b,{AddressPage:()=>G});var g=r(467),h=r(177),u=r(4341),s=r(4742),e=r(4438),k=r(3656),_=r(9568),M=r(1263),C=r(2068);const d=["map"];function v(i,c){if(1&i){const n=e.RV6();e.j41(0,"ion-button",18),e.bIt("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.close())}),e.EFF(1),e.k0s()}if(2&i){const n=e.XpG();e.R7$(),e.JRh(n.text.cancel)}}function p(i,c){if(1&i){const n=e.RV6();e.j41(0,"ion-item",23),e.bIt("click",function(){const t=e.eBV(n).$implicit,a=e.XpG(2);return e.Njj(a.close(t))}),e.j41(1,"ion-label"),e.EFF(2),e.j41(3,"small",24),e.EFF(4),e.k0s()()()}if(2&i){const n=c.$implicit;e.R7$(2),e.JRh(n.type),e.R7$(2),e.JRh(n.address)}}function I(i,c){if(1&i&&(e.j41(0,"ion-accordion-group")(1,"ion-accordion",19)(2,"ion-item",20)(3,"ion-label"),e.EFF(4),e.k0s()(),e.j41(5,"div",21),e.DNE(6,p,5,2,"ion-item",22),e.k0s()()()),2&i){const n=e.XpG();e.R7$(4),e.JRh(n.text.saved_address),e.R7$(2),e.Y8G("ngForOf",n.data)}}function P(i,c){if(1&i){const n=e.RV6();e.j41(0,"ion-searchbar",25),e.mxI("ngModelChange",function(t){e.eBV(n);const a=e.XpG();return e.DH7(a.autocomplete,t)||(a.autocomplete=t),e.Njj(t)}),e.bIt("ionInput",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.UpdateSearchResults())})("ionClear",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.ClearAutocomplete())}),e.k0s()}if(2&i){const n=e.XpG();e.FS9("placeholder",n.text.search_place),e.R50("ngModel",n.autocomplete),e.Y8G("disabled",n.hasClick)}}function R(i,c){if(1&i){const n=e.RV6();e.j41(0,"ion-item",26),e.bIt("click",function(){const t=e.eBV(n).$implicit,a=e.XpG();return e.Njj(a.SelectSearchResult(t))}),e.EFF(1),e.k0s()}if(2&i){const n=c.$implicit,o=e.XpG();e.Y8G("hidden",0==o.autocompleteItems.length),e.R7$(),e.SpI(" ",n.description,"\n")}}function f(i,c){1&i&&(e.j41(0,"div",27),e.nrm(1,"ion-icon",28),e.k0s())}function A(i,c){1&i&&(e.j41(0,"div",27)(1,"p",29),e.nrm(2,"ion-spinner",30),e.k0s()())}function j(i,c){if(1&i){const n=e.RV6();e.j41(0,"ion-button",31),e.bIt("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.saveAddress())}),e.EFF(1),e.k0s()}if(2&i){const n=e.XpG();e.R7$(),e.JRh(n.text.save_address)}}function O(i,c){1&i&&(e.j41(0,"ion-button",32),e.nrm(1,"ion-spinner",33),e.k0s())}let G=(()=>{var i;class c{constructor(o,t,a,m,l,T){this.navParams=o,this.platform=t,this.zone=a,this.otherService=m,this.mapService=l,this.server=T,this.type="Home",this.autocompleteItems=[],this.show=!0,this.hasClick=!1,this.data=o.get("data"),this.store_id=o.get("store_id");const y=localStorage.getItem("app_lang");null!==y&&(this.text=JSON.parse(y),this.text=this.text.text)}ngOnInit(){}setType(o){this.type=o}ionViewDidEnter(){var o=this;return(0,g.A)(function*(){o.platform.ready().then(()=>{o.loadMap()})})()}close(o=[]){var t=this;return(0,g.A)(function*(){t.otherService.closeModel(o)})()}loadMap(){var o=this;return(0,g.A)(function*(){o.map=null,o.show=!0;let t=yield o.mapService.getMap();o.map=yield new google.maps.Map(o.mapElement.nativeElement,t),o.show=!1,o.map.addListener("tilesloaded",(0,g.A)(function*(){o.lat=o.map.center.lat(),o.lng=o.map.center.lng()}))})()}UpdateSearchResults(){this.GoogleAutocomplete.getPlacePredictions({input:this.autocomplete},(o,t)=>{this.autocompleteItems=[],this.zone.run(()=>{o.forEach(a=>{this.autocompleteItems.push(a)})})})}SelectSearchResult(o){const t=new google.maps.Geocoder;new google.maps.InfoWindow,this.placeid=o.place_id,t.geocode({placeId:this.placeid},(m,l)=>{"OK"===l?m[0]?(this.map.setZoom(16),this.map.setCenter(m[0].geometry.location)):window.alert("No results found"):window.alert("Geocoder failed due to: "+l)}),this.ClearAutocomplete()}ClearAutocomplete(){this.autocompleteItems=[],this.autocomplete=""}saveAddress(){var o=this;return(0,g.A)(function*(){if(o.lat=17.406523626397387,o.lng=78.49867251781943,!o.address||o.address.length<4||!o.lat||!o.lng)return o.otherService.toast(o.text.correct_detail);let t={type:o.type,address:o.address,floor:o.floor,landmark:o.landmark,lat:o.lat,lng:o.lng,user_id:localStorage.getItem("user_id"),store_id:o.store_id};o.hasClick=!0,o.server.saveAddress(t).subscribe(a=>{o.hasClick=!1,o.close(a.latest)})})()}}return(i=c).\u0275fac=function(o){return new(o||i)(e.rXU(k.y8),e.rXU(k.OD),e.rXU(e.SKi),e.rXU(_.G),e.rXU(M.u),e.rXU(C.Z))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-address"]],viewQuery:function(o,t){if(1&o&&e.GBs(d,5),2&o){let a;e.mGM(a=e.lsd())&&(t.mapElement=a.first)}},decls:40,vars:28,consts:[["map",""],[1,"ion-no-border"],["slot","end"],["color","medium",3,"click",4,"ngIf"],[1,"ion-padding"],[4,"ngIf"],[2,"font-weight","bold"],["size","4",3,"click"],["name","address","label-placement","floating","fill","outline","mode","md",3,"ngModelChange","label","ngModel","disabled"],["name","floor","label-placement","floating","fill","outline","mode","md",3,"ngModelChange","label","ngModel","disabled"],["name","landmark","label-placement","floating","fill","outline","mode","md",3,"ngModelChange","label","ngModel","disabled"],["mode","ios","color","light",3,"ngModel","placeholder","disabled","ngModelChange","ionInput","ionClear",4,"ngIf"],["tappable","",3,"hidden","click",4,"ngFor","ngForOf"],[1,"map-wrapper"],["id","map_center",4,"ngIf"],["id","map"],["mode","ios","expand","block","color","dark","type","submit",3,"click",4,"ngIf"],["mode","ios","expand","block","color","dark","type","button",4,"ngIf"],["color","medium",3,"click"],["value","first"],["slot","header","color","light",1,"h"],["slot","content",1,"ion-padding"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[2,"color","gray","margin-top","5px","display","block"],["mode","ios","color","light",3,"ngModelChange","ionInput","ionClear","ngModel","placeholder","disabled"],["tappable","",3,"click","hidden"],["id","map_center"],["name","location","color","dark",2,"font-size","40px"],["align","center"],["name","crescent",2,"font-size","40px"],["mode","ios","expand","block","color","dark","type","submit",3,"click"],["mode","ios","expand","block","color","dark","type","button"],["name","crescent"]],template:function(o,t){if(1&o){const a=e.RV6();e.j41(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-buttons",2),e.DNE(3,v,2,1,"ion-button",3),e.k0s()()(),e.j41(4,"ion-content")(5,"div",4),e.DNE(6,I,7,2,"ion-accordion-group",5),e.j41(7,"p",6),e.EFF(8),e.k0s(),e.nrm(9,"br"),e.j41(10,"ion-row")(11,"ion-col",7),e.bIt("click",function(){return e.eBV(a),e.Njj(t.setType("Home"))}),e.j41(12,"span"),e.EFF(13),e.k0s()(),e.j41(14,"ion-col",7),e.bIt("click",function(){return e.eBV(a),e.Njj(t.setType("Office"))}),e.j41(15,"span"),e.EFF(16),e.k0s()(),e.j41(17,"ion-col",7),e.bIt("click",function(){return e.eBV(a),e.Njj(t.setType("Other"))}),e.j41(18,"span"),e.EFF(19),e.k0s()()(),e.nrm(20,"br")(21,"br"),e.j41(22,"ion-input",8),e.mxI("ngModelChange",function(l){return e.eBV(a),e.DH7(t.address,l)||(t.address=l),e.Njj(l)}),e.k0s(),e.nrm(23,"br"),e.j41(24,"ion-input",9),e.mxI("ngModelChange",function(l){return e.eBV(a),e.DH7(t.floor,l)||(t.floor=l),e.Njj(l)}),e.k0s(),e.nrm(25,"br"),e.j41(26,"ion-input",10),e.mxI("ngModelChange",function(l){return e.eBV(a),e.DH7(t.landmark,l)||(t.landmark=l),e.Njj(l)}),e.k0s(),e.nrm(27,"br"),e.j41(28,"p",6),e.EFF(29),e.k0s(),e.DNE(30,P,1,3,"ion-searchbar",11)(31,R,2,2,"ion-item",12),e.j41(32,"div",13),e.DNE(33,f,2,0,"div",14)(34,A,3,0,"div",14),e.nrm(35,"div",15,0),e.k0s(),e.nrm(37,"br"),e.DNE(38,j,2,1,"ion-button",16)(39,O,2,0,"ion-button",17),e.k0s()()}2&o&&(e.R7$(3),e.Y8G("ngIf",t.text),e.R7$(3),e.Y8G("ngIf",t.data&&t.data.length>0),e.R7$(2),e.JRh(t.text.add_new_address),e.R7$(4),e.HbH("Home"==t.type?"typeSelected":"type"),e.R7$(),e.JRh(t.text.home),e.R7$(2),e.HbH("Office"==t.type?"typeSelected":"type"),e.R7$(),e.JRh(t.text.office),e.R7$(2),e.HbH("Other"==t.type?"typeSelected":"type"),e.R7$(),e.JRh(t.text.other),e.R7$(3),e.FS9("label",t.text.com_address),e.R50("ngModel",t.address),e.Y8G("disabled",t.hasClick),e.R7$(2),e.FS9("label",t.text.floor),e.R50("ngModel",t.floor),e.Y8G("disabled",t.hasClick),e.R7$(2),e.FS9("label",t.text.landmark),e.R50("ngModel",t.landmark),e.Y8G("disabled",t.hasClick),e.R7$(3),e.JRh(t.text.pin_point),e.R7$(),e.Y8G("ngIf",!t.show),e.R7$(),e.Y8G("ngForOf",t.autocompleteItems),e.R7$(2),e.Y8G("ngIf",!t.show),e.R7$(),e.Y8G("ngIf",t.show),e.R7$(4),e.Y8G("ngIf",!t.hasClick),e.R7$(),e.Y8G("ngIf",t.hasClick))},dependencies:[s.bv,s.xk,s.YH,s.Jm,s.QW,s.hU,s.W9,s.eU,s.iq,s.$w,s.uz,s.he,s.ln,s.S1,s.w2,s.ai,s.Gw,h.MD,h.Sq,h.bT,u.YN,u.BC,u.vS],styles:["ion-row[_ngcontent-%COMP%]{text-align:center}ion-toolbar[_ngcontent-%COMP%]{--background: white}.type[_ngcontent-%COMP%]{background-color:var(--ion-color-light);padding:10px 15px;border-radius:5px}.typeSelected[_ngcontent-%COMP%]{background-color:var(--ion-color-dark);color:#fff;padding:10px 15px;border-radius:5px}#map[_ngcontent-%COMP%]{width:100%;height:45vh}.map-wrapper[_ngcontent-%COMP%]{position:relative}.map-wrapper[_ngcontent-%COMP%]   #map_center[_ngcontent-%COMP%]{position:absolute;z-index:99;height:40px;width:40px;top:50%;left:50%;margin-left:-21px;margin-top:-41px}.h[_ngcontent-%COMP%]{--min-height:10px !important}ion-accordion[_ngcontent-%COMP%]{border-radius:10px;margin-bottom:40px}"]}),c})()},1263:(E,b,r)=>{r.d(b,{u:()=>k});var g=r(467);const u=(0,r(5083).F3)("Geolocation",{web:()=>r.e(2920).then(r.bind(r,2920)).then(_=>new _.GeolocationWeb)});var s=r(4438),e=r(3158);let k=(()=>{var _;class M{constructor(d){this.nativeGeocoder=d}getLocation(){const d=u.getCurrentPosition();return console.log("data ",d),d}getMap(){return(0,g.A)(function*(){const d=yield u.getCurrentPosition();return{center:yield new google.maps.LatLng(d.coords.latitude,d.coords.longitude),zoom:16,mapTypeId:google.maps.MapTypeId.ROADMAP}})()}getAddress(d,v){var p=this;return(0,g.A)(function*(){return yield p.nativeGeocoder.reverseGeocode(d,v,{useLocale:!0,maxResults:5}).then(function(){var P=(0,g.A)(function*(R){p.address="";let f=[];for(let[A,j]of Object.entries(R[0]))j.length>0&&f.push(j);f.reverse();for(let A of f)p.address+=A+", ";p.address=p.address.slice(0,-2)});return function(R){return P.apply(this,arguments)}}()).catch(P=>{}),console.log("Address  "+p.address),p.address})()}}return(_=M).\u0275fac=function(d){return new(d||_)(s.KVO(e.K))},_.\u0275prov=s.jDH({token:_,factory:_.\u0275fac,providedIn:"root"}),M})()}}]);